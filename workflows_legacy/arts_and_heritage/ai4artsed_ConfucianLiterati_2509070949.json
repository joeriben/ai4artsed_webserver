{
  "3": {
    "inputs": {
      "seed": 433637178644471,
      "steps": 25,
      "cfg": 5.5,
      "sampler_name": "dpmpp_2m",
      "scheduler": "normal",
      "denoise": 1,
      "model": [
        "4",
        0
      ],
      "positive": [
        "6",
        0
      ],
      "negative": [
        "7",
        0
      ],
      "latent_image": [
        "5",
        0
      ]
    },
    "class_type": "KSampler",
    "_meta": {
      "title": "KSampler"
    }
  },
  "4": {
    "inputs": {
      "ckpt_name": "OfficialStableDiffusion/sd3.5_large.safetensors"
    },
    "class_type": "CheckpointLoaderSimple",
    "_meta": {
      "title": "Choose your checkpoint ( = image generation model)"
    }
  },
  "5": {
    "inputs": {
      "width": 1024,
      "height": 1024,
      "batch_size": 1
    },
    "class_type": "EmptyLatentImage",
    "_meta": {
      "title": "Empty Latent Image"
    }
  },
  "6": {
    "inputs": {
      "text": [
        "48",
        0
      ],
      "clip": [
        "43",
        0
      ]
    },
    "class_type": "CLIPTextEncode",
    "_meta": {
      "title": "CLIP Text Encode (Prompt)"
    }
  },
  "7": {
    "inputs": {
      "text": "",
      "clip": [
        "43",
        0
      ]
    },
    "class_type": "CLIPTextEncode",
    "_meta": {
      "title": "CLIP Text Encode (Prompt)"
    }
  },
  "8": {
    "inputs": {
      "samples": [
        "3",
        0
      ],
      "vae": [
        "4",
        2
      ]
    },
    "class_type": "VAEDecode",
    "_meta": {
      "title": "VAE Decode"
    }
  },
  "9": {
    "inputs": {
      "filename_prefix": "ComfyUI",
      "images": [
        "8",
        0
      ]
    },
    "class_type": "SaveImage",
    "_meta": {
      "title": "Save Image"
    }
  },
  "11": {
    "inputs": {},
    "class_type": "ai4artsed_openrouter_key",
    "_meta": {
      "title": "Secure Access to OpenRouter API Key"
    }
  },
  "20": {
    "inputs": {
      "clip_name": "clip_g.safetensors",
      "type": "stable_diffusion",
      "device": "default"
    },
    "class_type": "CLIPLoader",
    "_meta": {
      "title": "Load CLIP"
    }
  },
  "26": {
    "inputs": {
      "value": [
        "37",
        0
      ]
    },
    "class_type": "PrimitiveString",
    "_meta": {
      "title": "ai4artsed_text_prompt"
    }
  },
  "37": {
    "inputs": {
      "value": "ein popstar auf der Bühne"
    },
    "class_type": "PrimitiveStringMultiline",
    "_meta": {
      "title": "Just a more convenient input for your prompt"
    }
  },
  "41": {
    "inputs": {
      "input_prompt": [
        "26",
        0
      ],
      "input_context": [
        "44",
        0
      ],
      "style_prompt": "You received two inputs: 1) the input_prompt and 2) the input_context. \n\nTransform the input_prompt into an image description according to the instructions defined in the input_context. Explicitely transform the input_context as cultural cf. artistic. cf intervening context. Also transform genres/artistic traditions in a concrete way (i.e. is it a dance, a photo, a painting, a song, a movie, a statue/sculpture? how should it be translated into an image?)\n\nThis is not a linguistic translation, but a cultural, aesthetic, cosmologic. semantic and structural transformation. \nReconstruct all entities and their relations as specified, ensuring that:\n- Each entity is retained – or respectively transformed – as instructed.\n- Each relation is altered in line with the particular aesthetics, genre-typical traits, and logic of the “Context”. Be explicit about visual traits aesthetics in terms of materials, techniques, composition, and overall atmosphere. Mention the input_context als cultural, cf. artistic, c.f intervening context in your OUTPUT explicitely.\n",
      "api_key": [
        "11",
        0
      ],
      "model": "openrouter/mistralai/mistral-nemo [multilingual / $0.01/$0.001]",
      "debug": "disable",
      "unload_model": "yes"
    },
    "class_type": "ai4artsed_prompt_interception",
    "_meta": {
      "title": "AI4ArtsEd Prompt Interception"
    }
  },
  "42": {
    "inputs": {
      "value": "Instruction:\nTranslate the full semantic content of the input prompt into the symbolic, social, and ethical categories of Confucian literati culture.\nPreserve all depicted relations, roles, and agencies, but re-encode them within the Confucian framework of cultivated harmony, role-based morality, and hierarchical relationality (lunli).\nTranslation Rules:\n1. Personhood and Social Role\nReconstruct all human figures as ethical actors (junzi, shi, xiao ren) situated within clear relational roles: ruler–minister, parent–child, elder–younger, teacher–student.\nEliminate all markers of celebrity, spectacle, or individualist self-expression. Replace with gestures of humility, restraint, and cultivated posture.\nExpress excellence not through fame, but through signs of inner cultivation (xiushen) and ritual propriety (li).\n2. Gestures and Expression\nAll bodily expressions must be contained, restrained, and morally coded.\nAvoid exaggerated affect. Prioritize posture that signals ethical intentionality, reverence, and self-cultivation.\nSinging, dancing, or speaking is only permitted within ritual or didactic contexts (e.g. musical performance for ancestral rites or poetry recitation).\n3. Space and Setting\nTranslate secular or entertainment-based spaces (e.g., “stage,” “concert hall,” “club”) into morally structured sites: study, temple, ancestral hall, ritual courtyard, mountain retreat.\nEvery spatial arrangement must reflect proper hierarchy: central axis for moral exemplars, side placement for learners or attendants.\nEnvironments should signal literary, ritual, or natural cultivation (e.g. studio hut, inkstone table, scroll alcove, pine grove, plum tree).\n4. Symbolic Substitution\nReplace technological, consumerist, or modern entertainment objects (e.g., microphone, spotlight, amplifier) with Confucian equivalents: scroll, qin zither, incense, inkbrush.\nReplace modern clothing with literati robes or ritual garments, coded for hierarchy, age, and moral status.\n5. Temporal Reorientation\nRemove references to novelty, trend, or “now.” Reorient temporality toward continuity, historical transmission (chuan cheng), and cultivated endurance.\nPerformance is reframed not as expression, but as embodiment of a classical tradition (e.g. singing → reciting Shi Jing verse; dancing → ritual choreography).\n6. Epistemic Focus\nReconstruct the entire scene as a metaphorical tableau of moral cultivation.\nThe result should reflect not personality, but relational embeddedness, historical literacy, and role-appropriate ethical comportment.\n\nNegative Prompting Directive:\nNo element from the original prompt may appear explicitly, even in negation.\nDo not refer to or contrast with the original cultural framework (e.g., “not a popstar,” “unlike modern spectacle”).\nAll translation must occur through full cultural recoding — not through contrast, exclusion, or reactive description."
    },
    "class_type": "PrimitiveStringMultiline",
    "_meta": {
      "title": "Interceptive context - REPLACE THIS AS YOU SEE FIT (default is meant for the AI4ArtsEd web-interface)"
    }
  },
  "43": {
    "inputs": {
      "clip_name1": "clip_g.safetensors",
      "clip_name2": "t5xxl_enconly.safetensors",
      "type": "sd3",
      "device": "default"
    },
    "class_type": "DualCLIPLoader",
    "_meta": {
      "title": "DualCLIPLoader"
    }
  },
  "44": {
    "inputs": {
      "value": [
        "42",
        0
      ]
    },
    "class_type": "PrimitiveString",
    "_meta": {
      "title": "ai4artsed_context_prompt"
    }
  },
  "46": {
    "inputs": {
      "preview": "",
      "source": [
        "41",
        0
      ]
    },
    "class_type": "PreviewAny",
    "_meta": {
      "title": "cultural translation"
    }
  },
  "47": {
    "inputs": {
      "input_prompt": "",
      "input_context": "professional translator",
      "style_prompt": "Translate the prompt into English with maximal semantic preservation. \nMaintain the original structure, and preserve all culturally specific terms or non-translatable phrases in their original form. \nDo not translate proper names, ritual terms, or material names unless they have a common English usage. \nMark such terms with double brackets, e.g. [[egungun]], and preserve their position. \nDo not paraphrase, interpret, or summarize. Do not add any comments or explanations.\nReturn only the translated prompt as plain text.",
      "api_key": "",
      "model": "local/mistral:7b",
      "debug": "disable",
      "unload_model": "yes"
    },
    "class_type": "ai4artsed_prompt_interception",
    "_meta": {
      "title": "AI4ArtsEd Translation_english"
    }
  },
  "48": {
    "inputs": {
      "input_prompt": [
        "41",
        0
      ],
      "input_context": "You are an artist in the Confucian literati tradition. Treat the 'input_prompt' as a spark. Do not reproduce it literally; instead, translate its elements into brush, ink, space, emptiness, and inscription. Describe a literati scene in operator terms, where vitality outweighs likeness.\nOperators to apply:\nSpirit-resonance (qiyun shengdong): every stroke carries vitality and moral breath.\nBrush: bone-line contour, fiber texture stroke, axe-cut stroke, dry-brush abrasion; irregular and calligraphic.\nInk and color: restricted Five Colors; 3–5 ink gradations; broken transitions (po mo) for vitality.\nSpace: Guo Xi’s three distances (high, deep, level); one-corner or shifting vantage; layered configuration.\nEmptiness (liubai): 50–70% of field unmarked or misted, active balance, no fillers.\nScale and hierarchy: cultivated presences and architectural accents are always small, embedded, never central.\nIntegration: inscriptions interlock with image; single cinnabar seal placed as counterpoint.\nDeviation: distortion or eccentric spacing permitted when it intensifies resonance.\nUnity: calligraphic edges, two-dimensional integrity; word and image from one origin (shuhua tongyuan).\nInstruction:\nGenerate a vivid scenario description that applies these operators to the input. Do not copy input nouns literally; express them only as their literati functions (presence, enclosure, axis, layered field, inscription plane). The output is a single scene in literati logic, precise and procedural.",
      "style_prompt": "YOUR OUTPUT MUST NOT EXCEED 250 WORDS!\n\nYou received two inputs: 1) the input_prompt and 2) the input_context. \n\nTransform the following input text—regardless of genre—into a single, uninterrupted paragraph structured for encoding by a T5 model and subsequent conditioning of a Stable Diffusion 3.5 (or Flux1) image generation model. Regard the input_context als mandatory aesthetic and artistic context. Derive your visual descriptions from this cultural context ONLY!\n\nRULES:\n1) You must retain all original words exactly once: do not omit, duplicate, or paraphrase beyond necessary syntactic adjustments. \n2) Do translate content into a visual depiction/description. Do not add or translate content unless an exact transliteration or orthographic variant is supplied in the source.\n3) When the original tells a story, pick a key scene from the story and turn the text into a scenic description, using the original words and expressions.  \n\nGUIDANCE:\nConsider the following categories as guideline for your professional prompting process:\n- Core subject (approx. 10–30 tokens): Identify and foreground the principal subject matter as fully specified in the source.\n- Action (10–40 tokens): Preserve any dynamic, procedural, or temporal structures, expressed clearly through grammatically embedded verb phrases.\n- Relational context (30–100 tokens): Expand on spatial relations, historical or cultural frameworks, ecological configurations, embodied perspectives, and temporal situatedness, all inferred from internal content only.\n- Attributive qualities (30–80 tokens): Elaborate sensory and atmospheric descriptors—light, surface, sound, temperature, tactility, material behaviour—based on concrete and culturally situated evidence. Avoid cliché mappings such as “melancholy → rain” or “futurism → neon.” Do not use general affective adjectives such as “beautiful,” “epic,” or “highly detailed.” Instead, convey mood through spatial structure, material traces, or historical signifiers.\n- Material, stylistic and medial references (10–40 tokens): If applicable, retain or clarify materialities (pictorial mediality), stylistic provenance using historically anchored terms (e.g., “early Bauhaus sketch,” “Qing-dynasty monochrome ink”). Avoid genre tropes unless explicitly included in the original text.\n- Technical parameters (0–20 tokens): Place any camera data, aspect ratio at the end of the prompt. Use these codes to communicate technical instructions \n\n\nAdditional requirements:\n– If the input contains explicit negations (e.g., “no neon”), isolate and place them at the end of the prompt after an em dash as a negative prompt clause.\n– If the source uses conflicting descriptors (e.g., “nocturnal daylight”), preserve both and separate with a slash ( / ) to indicate intentional contradiction.\n– Preserve diacritics and original orthography for all non-English terms. Do not transliterate unless a dual form is provided.\n– For ambiguous or poetic language, preserve ambiguity. If metaphors operate structurally (e.g., “grief carved into the orchard”), translate them into spatial/material compositions rather than interpretive paraphrase.\n– If vague temporal expressions appear (e.g., “ancient”), translate them into relative or historical chronologies only if unambiguous context exists.\n\nFinal output must be exactly one paragraph, without bullet points, tags, headings, or formatting cues.\n\n!YOUR OUTPUT MUST NOT EXCEED 250 WORDS!",
      "api_key": "",
      "model": "openrouter/mistralai/mistral-nemo [multilingual / $0.01/$0.001]",
      "debug": "enable",
      "unload_model": "no"
    },
    "class_type": "ai4artsed_prompt_interception",
    "_meta": {
      "title": "Promtp optimization for t5"
    }
  },
  "49": {
    "inputs": {
      "preview": "",
      "source": [
        "48",
        0
      ]
    },
    "class_type": "PreviewAny",
    "_meta": {
      "title": "final prompt"
    }
  }
}