{
  "name": "output_image_gpt5",
  "type": "api_output_chunk",
  "backend_type": "openrouter",
  "media_type": "image",
  "description": "GPT-5 Image - Multimodal chat model with image generation via OpenRouter",

  "api_config": {
    "provider": "openrouter",
    "model": "openai/gpt-5-image",
    "endpoint": "https://openrouter.ai/api/v1/chat/completions",
    "method": "POST",
    "headers": {
      "Authorization": "Bearer {{OPENROUTER_API_KEY}}",
      "Content-Type": "application/json",
      "HTTP-Referer": "https://ai4artsed.com",
      "X-Title": "AI4ArtsEd DevServer"
    },
    "request_body": {
      "model": "openai/gpt-5-image",
      "messages": [
        {
          "role": "system",
          "content": "You are an AI assistant that generates images. When asked to create an image, generate it directly without additional commentary."
        },
        {
          "role": "user",
          "content": "{{PROMPT}}"
        }
      ],
      "max_tokens": 4096
    }
  },

  "input_mappings": {
    "prompt": {
      "field": "request_body.messages[1].content",
      "source": "{{PREVIOUS_OUTPUT}}",
      "description": "Image generation prompt (as chat message)"
    },
    "max_tokens": {
      "field": "request_body.max_tokens",
      "default": 4096,
      "description": "Maximum completion tokens"
    }
  },

  "output_mapping": {
    "type": "chat_completion_with_image",
    "format": "multimodal",
    "extract_path": "choices[0].message.content",
    "extract_logic": "Find first content item with type='image_url', extract image_url.url",
    "description": "Extract image URL from multimodal chat completion response"
  },

  "meta": {
    "estimated_duration_seconds": "5-15",
    "requires_gpu": false,
    "api_provider": "openrouter",
    "model_id": "openai/gpt-5-image",
    "provider_model_id": "gpt-5-2025-08-07",
    "cost_per_image": "$0.00004 (output images at $0.04/K)",
    "context_length": 400000,
    "max_prompt_tokens": 272000,
    "max_completion_tokens": 128000,
    "modalities": {
      "input": ["image", "text", "file"],
      "output": ["image", "text"]
    },
    "features": [
      "Mandatory reasoning mode",
      "Advanced text rendering in images",
      "Detailed image editing",
      "Improved instruction following"
    ],
    "notes": "GPT-5 Image via OpenRouter. Chat completion model with image generation. Requires OPENROUTER_API_KEY environment variable. GPT-5's reasoning mode interprets conceptual/abstract prompts directly without needing optimization."
  }
}
