{
  "name": "output_image_gemini_3_pro",
  "type": "api_output_chunk",
  "backend_type": "openrouter",
  "media_type": "image",
  "description": "Google Gemini 3 Pro Image - Multimodal chat model with image generation via OpenRouter",

  "api_config": {
    "provider": "openrouter",
    "model": "google/gemini-3-pro-image-preview",
    "endpoint": "https://openrouter.ai/api/v1/chat/completions",
    "method": "POST",
    "headers": {
      "Content-Type": "application/json",
      "HTTP-Referer": "https://ai4artsed.com",
      "X-Title": "AI4ArtsEd DevServer"
    },
    "request_body": {
      "model": "google/gemini-3-pro-image-preview",
      "messages": [
        {
          "role": "system",
          "content": "You are an AI assistant that generates images. When asked to create an image, generate it directly without additional commentary."
        },
        {
          "role": "user",
          "content": "{{PROMPT}}"
        }
      ],
      "max_tokens": 4096
    }
  },

  "input_mappings": {
    "prompt": {
      "field": "request_body.messages[1].content",
      "source": "{{PREVIOUS_OUTPUT}}",
      "description": "Image generation prompt (as chat message)"
    },
    "max_tokens": {
      "field": "request_body.max_tokens",
      "default": 4096,
      "description": "Maximum completion tokens"
    }
  },

  "output_mapping": {
    "type": "chat_completion_with_image",
    "format": "multimodal",
    "extract_path": "choices[0].message.content",
    "extract_logic": "Find first content item with type='image_url', extract image_url.url",
    "description": "Extract image URL from multimodal chat completion response"
  },

  "meta": {
    "estimated_duration_seconds": "25-50",
    "quality_rating": 5,
    "speed_rating": 1,
    "requires_gpu": false,
    "api_provider": "openrouter",
    "model_id": "google/gemini-3-pro-image-preview",
    "provider_model_id": "gemini-3-pro-image-preview",
    "cost_per_image": "Variable (OpenRouter pricing)",
    "context_length": 1000000,
    "max_prompt_tokens": 800000,
    "max_completion_tokens": 200000,
    "modalities": {
      "input": ["image", "text", "file"],
      "output": ["image", "text"]
    },
    "features": [
      "High-quality image generation",
      "Advanced text rendering",
      "Multimodal understanding",
      "Long context support"
    ],
    "notes": "Google Gemini 3 Pro Image via OpenRouter. Chat completion model with image generation capabilities. Requires OPENROUTER_API_KEY environment variable."
  }
}
