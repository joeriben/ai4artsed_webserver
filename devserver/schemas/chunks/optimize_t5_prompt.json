{
  "name": "optimize_t5_prompt",
  "type": "processing_chunk",
  "backend_type": "ollama",
  "description": "Optimize prompt for T5 encoder with semantic expansion",
  "model": "REMOTE_ADVANCED_MODEL",
  "template": {
    "system": "You are a T5 prompt optimization expert for Stable Diffusion 3.5 and Flux1 image generation models.",
    "prompt": "YOUR OUTPUT MUST NOT EXCEED 250 WORDS!\n\n=== CORE PRINCIPLE: SCENE TO 2D IMAGE ===\nTransform scenic/narrative descriptions into a FLAT 2D IMAGE specification.\nA 2D image has no story, no before/after - only WHAT IS VISIBLE in ONE FROZEN FRAME.\n\nTRANSFORMATION RULES:\n- Remove temporal language (before, after, then, suddenly, while)\n- Remove causality (because, therefore, which causes)\n- Convert actions to static poses (running → runner mid-stride)\n- Convert atmosphere to visible elements (mysterious → fog, dim lighting, shadows)\n- Translate metaphors into spatial/material compositions\n\n=== T5 SEMANTIC STRUCTURE (guides composition, invisible in output) ===\n\n1. Core subject (10-30 tokens): Principal subject matter foregrounded\n2. Pose/State (10-40 tokens): Static poses, frozen moments - NOT ongoing actions\n3. Relational context (30-100 tokens): Spatial relations, environmental configurations, embodied perspectives\n4. Attributive qualities (30-80 tokens): Light, surface, texture, temperature, material behavior. NO clichés (melancholy → rain). NO abstract adjectives (beautiful, epic, detailed)\n5. Visual medium (10-40 tokens): Describe visual qualities WITHOUT art-historical terms\n6. Technical parameters (0-20 tokens): Lighting setup, camera angle, depth of field - at end\n\n=== CULTURALLY NEUTRAL DESCRIPTORS ONLY ===\nFORBIDDEN: \"style of [artist]\" or art-historical technique names from ANY tradition\nUSE: Light (rim lighting, diffused, harsh), Texture (grain, smooth, rough), Space (layered planes, depth), Color (muted, saturated, warm, cool)\n\n=== ADDITIONAL RULES ===\n- Negations → isolate at end after em dash\n- Conflicting descriptors → preserve with slash ( / )\n- Preserve diacritics and original orthography\n- Preserve poetic ambiguity as spatial/material composition\n\nOutput: Single paragraph, no formatting. Max 250 words.\n\n=== OUTPUT FORMAT ===\nRESPOND WITH VALID JSON ONLY:\n{\n  \"t5_prompt\": \"your single-paragraph text (max 250 words)\"\n}\n\n---\n\nINPUT TEXT:\n{{INPUT_TEXT}}"
  },
  "meta": {
    "output_format": "json",
    "json_schema": {
      "t5_prompt": "string (max 250 words)"
    },
    "max_words": 250,
    "extracts": ["t5_prompt"],
    "model_family": "default",
    "notes": "Claude/OpenAI-optimized: structured sections, detailed rules"
  }
}
