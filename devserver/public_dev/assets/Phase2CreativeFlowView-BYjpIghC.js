const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pipelineExecution-BKUFF4Bc.js","assets/index-qtI_J46Q.js","assets/index-DbwOhK_X.css"])))=>i.map(i=>d[i]);
import{e as ae,s as ue,r as c,b as T,c as i,g as b,a as e,v as re,t as n,x as de,i as Z,f as M,o,_ as oe,h as $e,l as Ge,w as ee,y as Ne,F as W,j as se,n as te,p as ye,z as Ue,T as We,A as we,u as Ke,B as He,C as qe,k as be,m as X,D as je,q as Ye}from"./index-qtI_J46Q.js";import{e as ce,u as Je,g as Qe}from"./pipelineExecution-BKUFF4Bc.js";const Xe={class:"vector-fusion-flow"},Ze={key:0,class:"input-stage"},et={class:"input-container"},tt={class:"stage-title"},st=["placeholder"],at={class:"char-count"},ot=["disabled"],nt={key:0},it={key:1},lt={key:1,class:"split-flow-stage"},rt={class:"flow-row"},dt={class:"bubble bubble-input"},ct={class:"bubble-title"},ut={class:"bubble-text"},vt={class:"flow-row"},pt={class:"explanation-box"},gt={class:"explanation-text"},mt={class:"flow-row parallel"},ft={class:"bubble bubble-part-a"},_t={class:"bubble-title"},ht={class:"bubble-text"},bt={class:"bubble bubble-part-b"},$t={class:"bubble-title"},yt={class:"bubble-text"},wt={class:"flow-row"},kt={class:"explanation-box"},Pt={class:"explanation-text"},It={class:"flow-row"},Ct={class:"explanation-box highlight"},xt={class:"explanation-text"},St={class:"flow-row"},Tt={class:"bubble bubble-fusion"},Mt={class:"bubble-title"},Ft={class:"bubble-text"},Rt={class:"flow-row"},At=["disabled"],Et={key:0},Bt={key:1},Vt={key:2,class:"results-stage"},Lt={class:"stage-title"},zt={class:"images-grid"},Dt={class:"image-header"},Ot={class:"image-title"},Gt={key:0,class:"image-container"},Nt=["src"],Ut={key:1,class:"image-placeholder"},Wt={key:0,class:"spinner"},Kt={key:1,class:"waiting"},Ht={class:"image-caption"},qt={class:"image-header"},jt={class:"image-title"},Yt={key:0,class:"image-container"},Jt=["src"],Qt={key:1,class:"image-placeholder"},Xt={key:0,class:"spinner"},Zt={key:1,class:"waiting"},es={class:"image-caption"},ts={class:"image-header"},ss={class:"image-title"},as={key:0,class:"image-container"},os=["src"],ns={key:1,class:"image-placeholder"},is={key:0,class:"spinner"},ls={key:1,class:"waiting"},rs={class:"image-caption"},ds={class:"image-header"},cs={class:"image-title"},us={key:0,class:"image-container"},vs=["src"],ps={key:1,class:"image-placeholder"},gs={key:0,class:"spinner"},ms={key:1,class:"waiting"},fs={class:"image-caption"},_s={key:0,class:"flow-row"},hs=ae({__name:"Phase2VectorFusionInterface",props:{configId:{},executionMode:{default:"eco"},safetyLevel:{default:"kids"}},emits:["generated"],setup(y,{emit:$}){const S=y,z=$,{t:D}=ue(),s=c("input"),_=c(""),h=c(null),B=c("linear"),F=c(!1),R=c(!1),r=c(0),u=c({original:"",splitA:"",splitB:"",fusion:""}),g=T(()=>_.value.trim().length>0);S.configId.includes("spherical")&&(B.value="spherical");async function G(){if(g.value){F.value=!0;try{console.log("[VectorFusion] Starting split...");const l={schema:S.configId,input_text:_.value,execution_mode:S.executionMode,safety_level:S.safetyLevel},d=await ce(l);if(d.status!=="success"||!d.final_output)throw new Error(d.error||"Split failed");console.log("[VectorFusion] Split complete:",d.final_output);const k=JSON.parse(d.final_output);h.value={part_a:k.part_a||"",part_b:k.part_b||""},s.value="split"}catch(l){console.error("[VectorFusion] Split error:",l),alert(`Split fehlgeschlagen: ${l instanceof Error?l.message:"Unknown error"}`)}finally{F.value=!1}}}async function f(){if(h.value){R.value=!0,s.value="generating",r.value=0;try{r.value=1,console.log("[VectorFusion] Generating original...");const l=await v(_.value,_.value,.5);u.value.original=`/api/media/${l.run_id}`,r.value=2,console.log("[VectorFusion] Generating split A...");const d=await v(h.value.part_a,h.value.part_a,0);u.value.splitA=`/api/media/${d.run_id}`,r.value=3,console.log("[VectorFusion] Generating split B...");const k=await v(h.value.part_b,h.value.part_b,1);u.value.splitB=`/api/media/${k.run_id}`,r.value=4,console.log("[VectorFusion] Generating fusion...");const w=await v(h.value.part_a,h.value.part_b,.5);u.value.fusion=`/api/media/${w.run_id}`,r.value=5,s.value="complete",console.log("[VectorFusion] ‚úÖ All images generated!"),w.run_id&&z("generated",w.run_id)}catch(l){console.error("[VectorFusion] Generation error:",l),alert(`Generierung fehlgeschlagen: ${l instanceof Error?l.message:"Unknown error"}`),s.value="split"}finally{R.value=!1}}}async function v(l,d,k){const A={schema:B.value==="linear"?"vector_fusion_linear_clip":"vector_fusion_spherical_clip",input_text:`${l} + ${d}`,execution_mode:S.executionMode,safety_level:S.safetyLevel,custom_placeholders:{PART_A:l,PART_B:d,ALPHA:k.toString()}},x=await ce(A);if(x.status!=="success"||!x.run_id)throw new Error(x.error||"Image generation failed");return x}function m(){s.value="input",_.value="",h.value=null,r.value=0,u.value={original:"",splitA:"",splitB:"",fusion:""}}return(l,d)=>(o(),i("div",Xe,[s.value==="input"?(o(),i("div",Ze,[e("div",et,[e("div",tt,n(l.$t("vectorFusion.inputTitle")||"Beschreibe zwei Dinge zum Kombinieren"),1),re(e("textarea",{"onUpdate:modelValue":d[0]||(d[0]=k=>_.value=k),class:"main-input",placeholder:l.$t("vectorFusion.inputPlaceholder")||"z.B.: [ein Meteorit im Weltall] [ein silberner L√∂ffel]",rows:"4",maxlength:"500"},null,8,st),[[de,_.value]]),e("div",at,n(_.value.length)+" / 500",1),e("button",{class:"split-btn",disabled:!g.value||F.value,onClick:G},[F.value?(o(),i("span",it," ‚öôÔ∏è "+n(l.$t("vectorFusion.splitting")||"Teile auf..."),1)):(o(),i("span",nt," ‚úÇÔ∏è "+n(l.$t("vectorFusion.splitButton")||"Text aufteilen & visualisieren"),1))],8,ot)])])):b("",!0),s.value==="split"?(o(),i("div",lt,[e("div",rt,[e("div",dt,[d[1]||(d[1]=e("div",{class:"bubble-icon"},"üí≠",-1)),e("div",ct,n(l.$t("vectorFusion.originalInput")||"Deine Eingabe"),1),e("div",ut,n(_.value),1)])]),d[8]||(d[8]=e("div",{class:"flow-arrow"},[e("div",{class:"arrow-line"}),e("div",{class:"arrow-head"},"‚Üì")],-1)),e("div",vt,[e("div",pt,[d[2]||(d[2]=e("div",{class:"explanation-icon"},"‚úÇÔ∏è",-1)),e("div",gt,n(l.$t("vectorFusion.splitExplanation")||"Die KI teilt deinen Text in zwei semantische Konzepte"),1)])]),d[9]||(d[9]=e("div",{class:"flow-arrow"},[e("div",{class:"arrow-line"}),e("div",{class:"arrow-head"},"‚Üì")],-1)),e("div",mt,[e("div",ft,[d[3]||(d[3]=e("div",{class:"bubble-icon"},"üîµ",-1)),e("div",_t,n(l.$t("vectorFusion.partA")||"Konzept A"),1),e("div",ht,n(h.value?.part_a),1)]),e("div",bt,[d[4]||(d[4]=e("div",{class:"bubble-icon"},"üü†",-1)),e("div",$t,n(l.$t("vectorFusion.partB")||"Konzept B"),1),e("div",yt,n(h.value?.part_b),1)])]),d[10]||(d[10]=Z('<div class="flow-row parallel" data-v-9db58391><div class="flow-arrow" data-v-9db58391><div class="arrow-line" data-v-9db58391></div><div class="arrow-head" data-v-9db58391>‚Üì</div></div><div class="flow-arrow" data-v-9db58391><div class="arrow-line" data-v-9db58391></div><div class="arrow-head" data-v-9db58391>‚Üì</div></div></div>',1)),e("div",wt,[e("div",kt,[d[5]||(d[5]=e("div",{class:"explanation-icon"},"üßÆ",-1)),e("div",Pt,n(l.$t("vectorFusion.vectorExplanation")||"Beide Texte werden in semantische Vektoren umgewandelt (CLIP)"),1)])]),d[11]||(d[11]=Z('<div class="flow-row parallel" data-v-9db58391><div class="flow-arrow" data-v-9db58391><div class="arrow-line" data-v-9db58391></div><div class="arrow-head" data-v-9db58391>‚Üì</div></div><div class="flow-arrow" data-v-9db58391><div class="arrow-line" data-v-9db58391></div><div class="arrow-head" data-v-9db58391>‚Üì</div></div></div>',1)),e("div",It,[e("div",Ct,[d[6]||(d[6]=e("div",{class:"explanation-icon"},"‚ú®",-1)),e("div",xt,n(l.$t("vectorFusion.fusionExplanation")||"Die Vektoren werden im semantischen Raum kombiniert (SLERP)"),1)])]),d[12]||(d[12]=Z('<div class="flow-row converging" data-v-9db58391><div class="converging-arrows" data-v-9db58391><div class="arrow-left" data-v-9db58391>‚Üí</div><div class="arrow-merge" data-v-9db58391>‚Üì</div><div class="arrow-right" data-v-9db58391>‚Üê</div></div></div>',1)),e("div",St,[e("div",Tt,[d[7]||(d[7]=e("div",{class:"bubble-icon"},"üé®",-1)),e("div",Mt,n(l.$t("vectorFusion.fusion")||"Fusion beider Konzepte"),1),e("div",Ft,n(B.value==="linear"?"Linear (LERP)":"Spherical (SLERP)")+" @ Œ±=0.5",1)])]),e("div",Rt,[e("button",{class:"generate-btn",disabled:R.value,onClick:f},[R.value?(o(),i("span",Bt," ‚öôÔ∏è "+n(l.$t("vectorFusion.generating")||"Generiere..."),1)):(o(),i("span",Et," ‚ú® "+n(l.$t("vectorFusion.generateImages")||"4 Bilder generieren"),1))],8,At)])])):b("",!0),s.value==="generating"||s.value==="complete"?(o(),i("div",Vt,[e("div",Lt,n(l.$t("vectorFusion.results")||"Ergebnisse"),1),e("div",zt,[e("div",{class:M(["image-card",{loading:r.value<1,active:r.value===1,complete:r.value>1}])},[e("div",Dt,[d[13]||(d[13]=e("div",{class:"image-icon"},"üìù",-1)),e("div",Ot,n(l.$t("vectorFusion.original")||"Original"),1)]),r.value>=1&&u.value.original?(o(),i("div",Gt,[e("img",{src:u.value.original,alt:"Original"},null,8,Nt)])):(o(),i("div",Ut,[r.value===1?(o(),i("div",Wt,"‚öôÔ∏è")):(o(),i("div",Kt,"‚è≥"))])),e("div",Ht,n(l.$t("vectorFusion.originalDesc")||"Ganzer Input"),1)],2),e("div",{class:M(["image-card",{loading:r.value<2,active:r.value===2,complete:r.value>2}])},[e("div",qt,[d[14]||(d[14]=e("div",{class:"image-icon"},"üîµ",-1)),e("div",jt,n(l.$t("vectorFusion.partA")||"Konzept A"),1)]),r.value>=2&&u.value.splitA?(o(),i("div",Yt,[e("img",{src:u.value.splitA,alt:"Split A"},null,8,Jt)])):(o(),i("div",Qt,[r.value===2?(o(),i("div",Xt,"‚öôÔ∏è")):(o(),i("div",Zt,"‚è≥"))])),e("div",es,n(h.value?.part_a),1)],2),e("div",{class:M(["image-card",{loading:r.value<3,active:r.value===3,complete:r.value>3}])},[e("div",ts,[d[15]||(d[15]=e("div",{class:"image-icon"},"üü†",-1)),e("div",ss,n(l.$t("vectorFusion.partB")||"Konzept B"),1)]),r.value>=3&&u.value.splitB?(o(),i("div",as,[e("img",{src:u.value.splitB,alt:"Split B"},null,8,os)])):(o(),i("div",ns,[r.value===3?(o(),i("div",is,"‚öôÔ∏è")):(o(),i("div",ls,"‚è≥"))])),e("div",rs,n(h.value?.part_b),1)],2),e("div",{class:M(["image-card",{loading:r.value<4,active:r.value===4,complete:r.value>4}])},[e("div",ds,[d[16]||(d[16]=e("div",{class:"image-icon"},"‚ú®",-1)),e("div",cs,n(l.$t("vectorFusion.fusion")||"Fusion"),1)]),r.value>=4&&u.value.fusion?(o(),i("div",us,[e("img",{src:u.value.fusion,alt:"Fusion"},null,8,vs)])):(o(),i("div",ps,[r.value===4?(o(),i("div",gs,"‚öôÔ∏è")):(o(),i("div",ms,"‚è≥"))])),e("div",fs,n(l.$t("vectorFusion.fusionDesc")||"A ‚äï B (Œ±=0.5)"),1)],2)]),s.value==="complete"?(o(),i("div",_s,[e("button",{class:"reset-btn",onClick:m}," üîÑ "+n(l.$t("vectorFusion.reset")||"Neu beginnen"),1)])):b("",!0)])):b("",!0)]))}}),bs=oe(hs,[["__scopeId","data-v-9db58391"]]),$s={class:"progress-animation-container"},ys={class:"token-processing-scene"},ws={class:"generating-text"},ks={class:"input-grid-container"},Ps={class:"canvas-grid"},Is={class:"output-grid-container"},Cs={class:"canvas-grid"},xs={class:"progress-bar-container"},Ss={class:"progress-bar-bg"},Ts={class:"progress-text"},Ms=196,Fs=ae({__name:"SpriteProgressAnimation",props:{progress:{}},setup(y){const $=y,S=T(()=>{const f=Math.min($.progress/90,1);return Math.floor(f*Ms)}),z=T(()=>$.progress>0&&$.progress<100),D=c(0);let s=null;const _=["#3498db","#9b59b6","#e74c3c","#2ecc71","#f39c12","#1abc9c","#e91e63"],h={robot:{pattern:[[0,0,0,0,4,4,4,4,4,4,0,0,0,0],[0,0,0,4,1,1,1,1,1,1,4,0,0,0],[0,0,4,1,6,6,1,1,6,6,1,4,0,0],[0,0,4,1,6,6,1,1,6,6,1,4,0,0],[0,0,4,1,1,1,5,5,1,1,1,4,0,0],[0,0,0,4,1,5,5,5,5,1,4,0,0,0],[0,0,0,0,4,4,4,4,4,4,0,0,0,0],[0,0,0,2,2,2,2,2,2,2,2,0,0,0],[0,0,2,2,2,2,2,2,2,2,2,2,0,0],[0,0,2,2,4,2,2,2,2,4,2,2,0,0],[0,0,2,2,2,2,2,2,2,2,2,2,0,0],[0,0,0,2,2,2,2,2,2,2,2,0,0,0],[0,0,3,3,3,0,0,0,0,3,3,3,0,0],[0,0,3,3,3,0,0,0,0,3,3,3,0,0]]},flower:{pattern:[[0,0,0,0,0,7,7,7,7,0,0,0,0,0],[0,0,0,0,7,7,6,6,7,7,0,0,0,0],[0,0,0,7,7,6,6,6,6,7,7,0,0,0],[0,0,7,7,6,6,6,6,6,6,7,7,0,0],[0,7,7,6,6,6,5,5,6,6,6,7,7,0],[0,7,6,6,6,5,5,5,5,6,6,6,7,0],[0,7,6,6,6,5,5,5,5,6,6,6,7,0],[0,7,7,6,6,6,5,5,6,6,6,7,7,0],[0,0,7,7,6,6,6,6,6,6,7,7,0,0],[0,0,0,7,7,6,4,4,6,7,7,0,0,0],[0,0,0,0,4,4,4,4,4,4,0,0,0,0],[0,0,0,0,0,4,4,4,4,0,0,0,0,0],[0,0,0,0,0,0,4,4,0,0,0,0,0,0],[0,0,0,0,0,0,4,4,0,0,0,0,0,0]]},football:{pattern:[[0,0,0,0,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,0,0,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,0,0,0,1,1,0],[0,1,1,0,0,1,1,1,1,0,0,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,0,0,1,1,1,1,0,0,1,1,0],[0,1,1,0,0,0,1,1,0,0,0,1,1,0],[0,0,1,1,0,0,1,1,0,0,1,1,0,0],[0,0,0,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,0,1,1,1,1,1,1,0,0,0,0]]},heart:{pattern:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,3,3,3,0,0,0,3,3,3,0,0,0],[0,3,3,7,3,3,0,3,3,7,3,3,0,0],[0,3,7,7,7,3,3,3,7,7,7,3,0,0],[0,3,7,7,7,7,3,7,7,7,7,3,0,0],[0,3,7,7,7,7,7,7,7,7,7,3,0,0],[0,0,3,7,7,7,7,7,7,7,3,0,0,0],[0,0,0,3,7,7,7,7,7,3,0,0,0,0],[0,0,0,0,3,7,7,7,3,0,0,0,0,0],[0,0,0,0,0,3,7,3,0,0,0,0,0,0],[0,0,0,0,0,0,3,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},star:{pattern:[[0,0,0,0,0,0,5,5,0,0,0,0,0,0],[0,0,0,0,0,0,5,5,0,0,0,0,0,0],[0,0,0,0,0,5,5,5,5,0,0,0,0,0],[0,0,0,0,0,5,5,5,5,0,0,0,0,0],[0,0,0,0,5,5,5,5,5,5,0,0,0,0],[5,5,5,5,5,5,5,5,5,5,5,5,5,5],[0,5,5,5,5,5,5,5,5,5,5,5,5,0],[0,0,5,5,5,5,5,5,5,5,5,5,0,0],[0,0,0,5,5,5,5,5,5,5,5,0,0,0],[0,0,5,5,5,0,5,5,0,5,5,5,0,0],[0,5,5,5,0,0,5,5,0,0,5,5,5,0],[5,5,5,0,0,0,5,5,0,0,0,5,5,5],[5,5,0,0,0,0,0,0,0,0,0,0,5,5],[0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},house:{pattern:[[0,0,0,0,0,0,3,3,0,0,0,0,0,0],[0,0,0,0,0,3,3,3,3,0,0,0,0,0],[0,0,0,0,3,3,3,3,3,3,0,0,0,0],[0,0,0,3,3,3,3,3,3,3,3,0,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,0,0],[0,0,2,2,2,2,2,2,2,2,2,2,0,0],[0,0,2,2,6,6,2,2,6,6,2,2,0,0],[0,0,2,2,6,6,2,2,6,6,2,2,0,0],[0,0,2,2,2,2,2,2,2,2,2,2,0,0],[0,0,2,2,2,2,2,2,2,2,2,2,0,0],[0,0,2,2,4,4,4,4,2,2,2,2,0,0],[0,0,2,2,4,4,4,4,2,2,2,2,0,0],[0,0,2,2,4,4,4,4,2,2,2,2,0,0],[0,0,2,2,4,4,4,4,2,2,2,2,0,0]]},tree:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4]]},moon:{pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,6,6,6,6,6,1,1,1,1,1,1],[1,1,6,6,6,6,6,6,6,1,1,1,1,1],[1,6,6,6,6,6,6,6,6,6,1,1,1,1],[1,6,6,6,6,6,6,6,6,6,1,1,1,1],[1,6,6,6,6,6,6,6,6,1,1,1,1,1],[1,6,6,6,6,6,6,6,1,1,1,1,1,1],[1,1,6,6,6,6,6,1,1,1,1,1,1,1],[1,1,1,6,6,6,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1]]},sun:{pattern:[[4,4,4,4,4,4,5,4,4,4,4,4,4,4],[4,4,4,4,4,4,5,4,4,4,4,4,4,4],[4,4,4,4,4,5,5,5,4,4,4,4,4,4],[4,5,4,4,5,5,5,5,5,4,4,5,4,4],[4,4,5,5,5,5,5,5,5,5,5,4,4,4],[4,4,4,5,5,5,5,5,5,5,4,4,4,4],[5,4,5,5,5,5,5,5,5,5,5,4,5,4],[4,4,5,5,5,5,5,5,5,5,5,4,4,4],[4,4,4,5,5,5,5,5,5,5,4,4,4,4],[4,4,5,5,5,5,5,5,5,5,5,4,4,4],[4,5,4,4,5,5,5,5,5,4,4,5,4,4],[4,4,4,4,4,5,5,5,4,4,4,4,4,4],[4,4,4,4,4,4,5,4,4,4,4,4,4,4],[4,4,4,4,4,4,5,4,4,4,4,4,4,4]]},earth:{pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,4,4,4,1,1,1,1,1,1],[1,1,1,1,4,4,4,4,4,1,1,1,1,1],[1,1,1,4,4,1,1,4,4,4,1,1,1,1],[1,1,1,4,1,1,1,1,4,4,1,1,1,1],[1,1,1,4,1,1,1,1,4,4,4,1,1,1],[1,1,1,4,4,1,1,4,4,4,4,1,1,1],[1,1,1,1,4,4,4,4,4,4,1,1,1,1],[1,1,1,1,1,4,4,4,4,1,1,1,1,1],[1,1,1,1,1,1,4,4,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1]]},mountains:{pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,3,3,2,2,2,2,2,2],[2,2,2,2,2,3,3,3,3,2,2,2,2,2],[2,2,3,3,3,3,3,3,3,3,2,2,2,2],[2,3,3,3,3,3,3,3,3,3,3,2,2,2],[3,3,3,3,3,3,6,3,3,3,3,3,2,2],[3,3,3,3,3,6,6,6,3,3,3,3,3,2],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},river:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,1,1,1,1,4,4,4,4,4,4,4],[4,4,4,4,1,1,1,1,4,4,4,4,4,4],[4,4,4,4,4,1,1,1,1,4,4,4,4,4],[4,4,4,4,4,4,1,1,1,1,4,4,4,4],[4,4,4,4,4,4,4,1,1,1,1,4,4,4],[4,4,4,4,4,4,1,1,1,1,4,4,4,4],[4,4,4,4,4,1,1,1,1,4,4,4,4,4],[4,4,4,4,1,1,1,1,4,4,4,4,4,4],[4,4,4,1,1,1,1,4,4,4,4,4,4,4],[4,4,1,1,1,1,4,4,4,4,4,4,4,4],[4,1,1,1,1,4,4,4,4,4,4,4,4,4],[1,1,1,1,4,4,4,4,4,4,4,4,4,4],[1,1,1,4,4,4,4,4,4,4,4,4,4,4]]},portal:{pattern:[[2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,7,7,7,7,7,7,2,2,2,2],[2,2,2,7,7,2,2,2,2,7,7,2,2,2],[2,2,7,7,2,6,6,6,6,2,7,7,2,2],[2,2,7,2,6,6,1,1,6,6,2,7,2,2],[2,2,7,2,6,1,1,1,1,6,2,7,2,2],[2,2,7,2,6,1,1,1,1,6,2,7,2,2],[2,2,7,2,6,6,1,1,6,6,2,7,2,2],[2,2,7,7,2,6,6,6,6,2,7,7,2,2],[2,2,2,7,7,2,2,2,2,7,7,2,2,2],[2,2,2,2,7,7,7,7,7,7,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2]]},rocket:{pattern:[[1,1,1,1,1,1,3,3,1,1,1,1,1,1],[1,1,1,1,1,3,3,3,3,1,1,1,1,1],[1,1,1,1,1,3,3,3,3,1,1,1,1,1],[1,1,1,1,1,2,2,2,2,1,1,1,1,1],[1,1,1,1,1,2,6,6,2,1,1,1,1,1],[1,1,1,1,1,2,6,6,2,1,1,1,1,1],[1,1,1,1,1,2,2,2,2,1,1,1,1,1],[1,1,1,1,1,2,2,2,2,1,1,1,1,1],[1,1,1,1,3,2,2,2,2,3,1,1,1,1],[1,1,1,3,3,2,2,2,2,3,3,1,1,1],[1,1,1,3,3,5,5,5,5,3,3,1,1,1],[1,1,1,1,5,5,5,5,5,5,1,1,1,1],[1,1,1,1,1,5,5,5,5,1,1,1,1,1],[1,1,1,1,1,1,5,5,1,1,1,1,1,1]]},sunset:{pattern:[[5,5,5,5,5,5,5,5,5,5,5,5,5,5],[5,5,5,5,5,5,5,5,5,5,5,5,5,5],[5,5,5,5,5,5,5,5,5,5,5,5,5,5],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,5,5,5,5,5,5,4,4,4,4,4],[4,4,5,5,5,5,5,5,5,5,4,4,4,4],[4,4,5,5,5,5,5,5,5,5,4,4,4,4],[4,4,4,5,5,5,5,5,5,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[6,6,6,6,6,6,6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6,6,6,6,6,6,6]]},alien:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,2,2,2,2,2,2,4,4,4,4],[4,4,4,2,2,2,2,2,2,2,2,4,4,4],[4,4,2,2,1,1,2,2,1,1,2,2,4,4],[4,4,2,2,1,1,2,2,1,1,2,2,4,4],[4,4,2,2,2,2,2,2,2,2,2,2,4,4],[4,4,4,2,2,1,1,1,1,2,2,4,4,4],[4,4,4,2,1,1,1,1,1,1,2,4,4,4],[4,4,4,4,2,2,2,2,2,2,4,4,4,4],[4,4,4,4,2,4,4,4,4,2,4,4,4,4],[4,4,4,2,2,4,4,4,4,2,2,4,4,4],[4,4,4,2,2,4,4,4,4,2,2,4,4,4]]},cat:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,5,5,4,4,4,4,5,5,4,4,4],[4,4,4,5,5,4,4,4,4,5,5,4,4,4],[4,4,4,5,5,5,4,4,5,5,5,4,4,4],[4,4,4,5,5,5,5,5,5,5,5,4,4,4],[4,4,4,5,5,5,5,5,5,5,5,4,4,4],[4,4,4,5,1,5,5,5,5,1,5,4,4,4],[4,4,4,5,1,5,5,5,5,1,5,4,4,4],[4,4,4,5,5,5,7,7,5,5,5,4,4,4],[4,4,4,5,5,7,7,7,7,5,5,4,4,4],[4,4,4,5,5,5,7,7,5,5,5,4,4,4],[4,4,4,4,5,5,5,5,5,5,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},dog:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,5,5,4,4,4,4,4,4,5,5,4,4],[4,4,5,5,5,4,4,4,4,5,5,5,4,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,4,5,1,1,5,5,1,1,5,4,4,4],[4,4,4,5,1,1,5,5,1,1,5,4,4,4],[4,4,4,5,5,5,3,3,5,5,5,4,4,4],[4,4,4,5,5,3,3,3,3,5,5,4,4,4],[4,4,4,5,5,5,3,3,5,5,5,4,4,4],[4,4,4,4,5,5,5,5,5,5,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},bird:{pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,5,5,1,1,1,1,1,1,1],[1,1,1,1,5,5,5,5,1,1,1,1,1,1],[1,1,1,5,5,5,5,5,5,1,1,1,1,1],[1,1,5,5,5,5,5,5,5,5,1,1,1,1],[1,5,5,5,5,5,5,5,5,5,5,1,1,1],[1,5,5,1,5,5,5,5,5,5,5,5,1,1],[5,5,5,1,5,5,5,5,5,5,5,5,5,1],[5,5,5,5,5,5,5,5,5,5,5,5,5,5],[1,5,5,5,5,5,5,5,5,5,5,5,5,1],[1,1,5,5,5,5,5,5,5,5,5,5,1,1],[1,1,1,5,5,5,5,5,5,5,5,1,1,1],[1,1,1,1,5,5,1,1,5,5,1,1,1,1],[1,1,1,1,5,5,1,1,5,5,1,1,1,1]]},pig:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,7,7,4,4,4,4,7,7,4,4,4],[4,4,4,7,7,7,4,4,7,7,7,4,4,4],[4,4,7,7,7,7,7,7,7,7,7,7,4,4],[4,4,7,7,7,7,7,7,7,7,7,7,4,4],[4,4,7,7,7,7,7,7,7,7,7,7,4,4],[4,4,7,1,1,7,7,7,7,1,1,7,4,4],[4,4,7,1,1,7,7,7,7,1,1,7,4,4],[4,4,7,7,7,7,3,3,7,7,7,7,4,4],[4,4,7,7,7,3,3,3,3,7,7,7,4,4],[4,4,7,7,7,3,3,3,3,7,7,7,4,4],[4,4,4,7,7,7,7,7,7,7,7,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},cow:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,3,3,4,4,4,4,4,4,3,3,4,4],[4,4,3,3,3,4,4,4,4,3,3,3,4,4],[4,4,6,6,6,6,6,6,6,6,6,6,4,4],[4,4,6,3,6,6,6,6,6,6,3,6,4,4],[4,4,6,6,6,6,6,6,6,6,6,6,4,4],[4,4,6,1,1,6,6,6,6,1,1,6,4,4],[4,4,6,1,1,6,6,6,6,1,1,6,4,4],[4,4,6,6,6,6,7,7,6,6,6,6,4,4],[4,4,6,6,6,7,7,7,7,6,6,6,4,4],[4,4,6,6,6,7,7,7,7,6,6,6,4,4],[4,4,4,6,6,6,6,6,6,6,6,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},horse:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,3,3,4,4,4,4,4],[4,4,4,4,4,4,3,3,3,3,4,4,4,4],[4,4,4,4,4,3,3,3,3,3,3,4,4,4],[4,4,4,4,3,3,3,3,3,3,3,3,4,4],[4,4,4,3,3,3,3,3,3,3,3,3,4,4],[4,4,4,3,3,3,3,3,3,3,3,3,4,4],[4,4,4,3,1,1,3,3,3,3,3,3,4,4],[4,4,4,3,1,1,3,3,3,3,3,3,4,4],[4,4,4,3,3,3,3,7,7,3,3,3,4,4],[4,4,4,3,3,3,7,7,7,7,3,3,4,4],[4,4,4,3,3,3,3,7,7,3,3,3,4,4],[4,4,4,4,3,3,3,3,3,3,3,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},camel:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,5,5,4,4,5,5,4,4,4,4],[4,4,4,5,5,5,5,5,5,5,5,4,4,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,5,1,1,5,5,5,5,5,5,5,4,4],[4,4,5,1,1,5,5,5,5,5,5,5,4,4],[4,4,5,5,5,5,3,3,5,5,5,5,4,4],[4,4,5,5,5,3,3,3,3,5,5,5,4,4],[4,4,5,5,5,5,3,3,5,5,5,5,4,4],[4,4,4,5,5,5,5,5,5,5,5,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},pizza:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,5,5,4,4,4,4,4,4],[4,4,4,4,4,5,5,5,5,4,4,4,4,4],[4,4,4,4,5,5,3,5,5,5,4,4,4,4],[4,4,4,5,5,5,5,5,3,5,5,4,4,4],[4,4,5,5,3,5,5,5,5,5,5,5,4,4],[4,4,5,5,5,5,5,3,5,5,3,5,4,4],[4,5,5,5,3,5,5,5,5,5,5,5,5,4],[4,5,5,5,5,5,5,3,5,5,5,5,5,4],[4,5,5,5,5,5,5,5,5,5,5,5,5,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},cake:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,5,5,4,4,4,4,4,4],[4,4,4,4,4,4,5,5,4,4,4,4,4,4],[4,4,4,4,4,3,7,7,3,4,4,4,4,4],[4,4,4,4,4,7,7,7,7,4,4,4,4,4],[4,4,4,4,4,7,7,7,7,4,4,4,4,4],[4,4,4,4,7,7,7,7,7,7,4,4,4,4],[4,4,4,7,7,7,7,7,7,7,7,4,4,4],[4,4,4,7,6,7,7,7,7,6,7,4,4,4],[4,4,7,7,7,7,6,6,7,7,7,7,4,4],[4,4,7,6,7,7,7,7,7,7,6,7,4,4],[4,4,7,7,7,7,7,7,7,7,7,7,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},cupcake:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,5,5,4,4,4,4,4,4],[4,4,4,4,4,4,5,5,4,4,4,4,4,4],[4,4,4,4,4,7,7,7,7,4,4,4,4,4],[4,4,4,4,7,7,7,7,7,7,4,4,4,4],[4,4,4,7,7,7,7,7,7,7,7,4,4,4],[4,4,4,7,7,6,7,7,6,7,7,4,4,4],[4,4,4,4,7,7,7,7,7,7,4,4,4,4],[4,4,4,4,2,7,7,7,7,2,4,4,4,4],[4,4,4,4,2,2,7,7,2,2,4,4,4,4],[4,4,4,4,4,2,2,2,2,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]}},B=Object.keys(h),F=c("robot"),R=T(()=>h[F.value]),r=T(()=>{const f=[];for(let v=0;v<14;v++)for(let m=0;m<14;m++){const l=(v*14+m)%7+1;f.push({colorIndex:l,row:v,col:m})}return f}),u=T(()=>{const f=R.value.pattern,v=[];for(let m=0;m<14;m++)for(let l=0;l<14;l++){const d=f[m]?.[l]??0;v.push({colorIndex:d,row:m,col:l})}return v});$e(()=>{const f=Math.floor(Math.random()*B.length),v=B[f];v&&(F.value=v)}),Ge(()=>{s!==null&&clearInterval(s)}),ee(()=>$.progress,(f,v)=>{f>0&&v===0&&(D.value=0,s!==null&&clearInterval(s),s=setInterval(()=>{D.value++},1e3)),(f>=100||f===0)&&s!==null&&(clearInterval(s),s=null)});function g(f,v){const m=_[f.colorIndex-1];return{backgroundColor:m,boxShadow:`0 0 6px ${m}80, inset 0 0 3px rgba(255,255,255,0.2)`,animationDelay:v*.005+"s"}}function G(f,v){const m=u.value[v],l=r.value[v];if(v===S.value-1&&z.value&&l&&m){const k=_[l.colorIndex-1],w=m.colorIndex>0?_[m.colorIndex-1]:"transparent";return{"--from-color":k,"--to-color":w,animationDelay:v*.005+"s",opacity:m.colorIndex===0?0:1}}const d=f.colorIndex>0?_[f.colorIndex-1]:"transparent";return{backgroundColor:d,boxShadow:f.colorIndex>0?`0 0 8px ${d}80, inset 0 0 4px rgba(255,255,255,0.3)`:"none",animationDelay:v*.005+"s",opacity:f.colorIndex===0?0:1}}return(f,v)=>(o(),i("div",$s,[e("div",ys,[e("div",ws,[Ne("generating "+n(D.value)+" sec.",1),v[0]||(v[0]=e("span",{class:"cursor"},"_",-1))]),e("div",ks,[e("div",Ps,[(o(!0),i(W,null,se(r.value,(m,l)=>(o(),i("div",{key:"input-"+l,class:M(["pixel-token",{hidden:l<S.value}]),style:te(g(m,l))},null,6))),128))])]),e("div",{class:M(["processor-box",{active:z.value}])},[...v[1]||(v[1]=[Z('<div class="processor-glow" data-v-a7a5f73a></div><div class="processor-core" data-v-a7a5f73a><div class="neural-network" data-v-a7a5f73a><div class="network-node node-1" data-v-a7a5f73a></div><div class="network-node node-2" data-v-a7a5f73a></div><div class="network-node node-3" data-v-a7a5f73a></div><div class="network-node node-4" data-v-a7a5f73a></div><div class="network-node node-5" data-v-a7a5f73a></div><div class="network-connection conn-1" data-v-a7a5f73a></div><div class="network-connection conn-2" data-v-a7a5f73a></div><div class="network-connection conn-3" data-v-a7a5f73a></div><div class="network-connection conn-4" data-v-a7a5f73a></div></div><div class="processor-icon" data-v-a7a5f73a>‚ö°</div></div>',2)])],2),e("div",Is,[e("div",Cs,[(o(!0),i(W,null,se(u.value,(m,l)=>(o(),i("div",{key:"output-"+l,class:M(["pixel-token",{visible:l<S.value,flying:l===S.value-1&&z.value}]),style:te(G(m,l))},null,6))),128))])]),e("div",xs,[e("div",Ss,[e("div",{class:"progress-bar-fill",style:te({width:y.progress+"%"})},[...v[2]||(v[2]=[e("div",{class:"progress-shine"},null,-1)])],4)]),e("div",Ts,n(Math.round(y.progress))+"%",1)])])]))}}),Rs=oe(Fs,[["__scopeId","data-v-a7a5f73a"]]),As={class:"pipeline-flow-container"},Es={key:0,class:"pipeline-header"},Bs={class:"pipeline-badge"},Vs={class:"flow-step input-step"},Ls={class:"step-bubble completed"},zs={class:"step-label"},Ds={class:"step-preview"},Os={class:"flow-step processing-step"},Gs=["onClick","title"],Ns={class:"step-icon"},Us={class:"step-label"},Ws={key:0,class:"step-status"},Ks={key:1,class:"step-status"},Hs={key:0,class:"duration"},qs={key:2,class:"step-status"},js={key:0,class:"step-details"},Ys={class:"details-content"},Js={class:"details-header"},Qs=["onClick"],Xs={class:"details-body"},Zs={key:0,class:"flow-arrow"},e4={class:"flow-step output-step"},t4={class:"step-bubble completed"},s4={class:"step-icon"},a4={class:"step-label"},o4=["src","alt"],n4={key:1,class:"result-placeholder"},i4=ae({__name:"PipelineFlowVisualization",props:{inputText:{},pipelineVisualization:{},executionSteps:{},finalOutput:{},isExecuting:{type:Boolean},showPipelineType:{type:Boolean}},setup(y){const $=y,{t:S}=ue(),z=T(()=>$.inputText?$.inputText.length>60?$.inputText.substring(0,60)+"...":$.inputText:""),D=T(()=>$.pipelineVisualization?.steps?$.pipelineVisualization.steps.map(r=>{const u=$.executionSteps?.find(g=>g.chunk_name===r.chunk_name);return{...r,status:u?.status||"pending",output:u?.output,duration_ms:u?.duration_ms,showDetails:!1}}):[]),s=T(()=>$.finalOutput&&{image:"üñºÔ∏è",audio:"üéµ",music:"üé∂",video:"üé¨"}[$.finalOutput.media_type||"image"]||"üñºÔ∏è"),_=r=>{r.status==="completed"&&r.output&&(r.showDetails=!r.showDetails)},h=r=>typeof r=="string"?r.length>300?r.substring(0,300)+"...":r:typeof r=="object"&&r!==null?Object.entries(r).map(([u,g])=>`${u}: ${g}`).join(`
`):JSON.stringify(r),B=r=>r<1e3?`${Math.round(r)}ms`:`${(r/1e3).toFixed(1)}s`,F=r=>`/api/media/image/${r}`,R=r=>{console.error("Failed to load image:",r)};return(r,u)=>(o(),i("div",As,[y.showPipelineType&&y.pipelineVisualization?(o(),i("div",Es,[e("span",Bs,n(y.pipelineVisualization.pipeline_type),1)])):b("",!0),e("div",{class:M(["pipeline-flow",{"is-executing":y.isExecuting}])},[e("div",Vs,[e("div",Ls,[u[0]||(u[0]=e("span",{class:"step-icon"},"üí°",-1)),e("div",zs,n(r.$t("pipeline.yourInput")),1),e("div",Ds,n(z.value),1)])]),u[5]||(u[5]=e("div",{class:"flow-arrow"},"‚Üí",-1)),(o(!0),i(W,null,se(D.value,(g,G)=>(o(),i(W,{key:`step-${g.step_number}`},[e("div",Os,[e("div",{class:M(["step-bubble",{active:g.status==="running",completed:g.status==="completed",pending:g.status==="pending",failed:g.status==="failed"}]),onClick:f=>_(g),title:g.description},[e("span",Ns,n(g.icon),1),e("div",Us,n(g.label),1),g.status==="running"?(o(),i("div",Ws,[...u[1]||(u[1]=[e("div",{class:"spinner"},null,-1)])])):g.status==="completed"?(o(),i("div",Ks,[u[2]||(u[2]=e("span",{class:"checkmark"},"‚úì",-1)),g.duration_ms?(o(),i("span",Hs,n(B(g.duration_ms)),1)):b("",!0)])):g.status==="failed"?(o(),i("div",qs,[...u[3]||(u[3]=[e("span",{class:"error-icon"},"‚úó",-1)])])):b("",!0)],10,Gs),ye(We,{name:"details-fade"},{default:Ue(()=>[g.showDetails&&g.output?(o(),i("div",js,[e("div",Ys,[e("div",Js,[e("strong",null,n(g.description),1),e("button",{onClick:we(f=>g.showDetails=!1,["stop"]),class:"close-btn"},"√ó",8,Qs)]),e("div",Xs,n(h(g.output)),1)])])):b("",!0)]),_:2},1024)]),G<D.value.length-1?(o(),i("div",Zs,"‚Üí")):b("",!0)],64))),128)),y.finalOutput?(o(),i(W,{key:0},[u[4]||(u[4]=e("div",{class:"flow-arrow"},"‚Üí",-1)),e("div",e4,[e("div",t4,[e("span",s4,n(s.value),1),e("div",a4,n(r.$t("pipeline.result")),1),y.finalOutput.run_id&&(y.finalOutput.media_type==="image"||!y.finalOutput.media_type)?(o(),i("img",{key:0,src:F(y.finalOutput.run_id),alt:r.$t("pipeline.generatedMedia"),class:"result-image",onError:R},null,40,o4)):(o(),i("div",n4,n(y.finalOutput.status||"Ready"),1))])])],64)):b("",!0)],2)]))}}),l4=oe(i4,[["__scopeId","data-v-5cd41bdb"]]),r4={class:"app-container"},d4={class:"top-bar"},c4={class:"top-left"},u4={class:"config-info"},v4={class:"config-name"},p4={key:0,class:"loading-container"},g4={class:"loading-text"},m4={key:2,class:"canvas-container"},f4={class:"cards-wrapper"},_4={class:"cards-container"},h4={class:"card-header"},b4={class:"card-title"},$4=["placeholder"],y4={class:"card-footer"},w4={class:"char-count"},k4={class:"card-header"},P4={class:"card-title"},I4={class:"card-content scrollable"},C4=["placeholder"],x4={key:1,class:"loading-text"},S4={key:0,class:"llm-indicator"},T4={class:"llm-text"},M4={key:0},F4={key:1},R4={key:2},A4={class:"result-header"},E4={class:"result-title"},B4={key:0,class:"char-count"},V4=["value"],L4={key:1,class:"result-empty-with-button"},z4=["disabled"],D4={key:0},O4={key:1},G4={key:0,class:"transform-hint"},N4={key:1,class:"examples-panel"},U4={class:"panel-title"},W4=["onClick"],K4={key:2,class:"execute-panel"},H4=["disabled"],q4={key:3,class:"media-selection-panel"},j4={class:"media-section-title"},Y4={class:"media-cards-row"},J4={class:"media-type"},Q4={class:"media-type"},X4={class:"media-type"},Z4={class:"media-type"},ea={class:"media-card disabled",title:"Coming Soon"},ta={class:"media-type"},sa={class:"media-card disabled",title:"Coming Soon"},aa={class:"media-type"},oa=["disabled"],na={class:"overlay-content"},ia={key:1,class:"preview-container"},la=["src"],ra={key:0,class:"image-retry-indicator"},da={key:2,class:"loading-indicator"},ca={class:"generating-text"},ua={class:"loading-hint"},va={class:"error-content"},pa={class:"error-title"},ga={class:"error-message"},le=5,ma=ae({__name:"Phase2CreativeFlowView",setup(y){const $=He(),S=Ye(),{t:z,locale:D}=ue(),s=Je(),_=Ke(),h=c(null),B=c(null),F=c(null),R=c(null),r=c(null),u=c(null),g=c(null),G=c(null),f=c(null),v=c(null),m=c(!0),l=c(""),d=c(!1),k=c(0),w=c(null),A=c(""),x=c(""),N=c(!1),O=c(0),L=c(null),ve=c(null),q=c(0),V=c(0),ne=c(null),pe=c([]),ge=c(null),j=c(null),ie=c(123456789),ke=c(null),P=T(()=>s.transformedPrompt),Pe=T(()=>_.language),me=c(["Eine kleine Maus auf einem Fahrrad","Der alte Mann und das Meer","Elektrische Schafe"]),Ie=T(()=>{if(!s.selectedConfig)return"";const a=_.language;return s.selectedConfig.name[a]||s.selectedConfig.name.en||s.selectedConfig.id}),fe=T(()=>l.value.trim().length>0&&s.selectedConfig);T(()=>P.value.trim().length>0),$e(async()=>{const a=$.params.configId;if(console.log("========================================"),console.log("[Phase2 LIFECYCLE] onMounted() called"),console.log("[Phase2 LIFECYCLE] configId:",a),console.log("[Phase2 LIFECYCLE] Current store.metaPrompt:",s.metaPrompt?.substring(0,50)),console.log("========================================"),console.log("[Phase2] Mounting with configId:",a),!a){w.value="No config ID provided",m.value=!1;return}try{const t=await Qe(a);v.value=t.pipeline_type,console.log("[Phase2] Pipeline type:",v.value)}catch(t){console.error("[Phase2] Failed to load pipeline metadata:",t)}if(console.log("[Phase2] Loading config..."),await s.setConfig(a),s.error){console.error("[Phase2] Config loading error:",s.error),w.value=s.error;return}if(console.log("[Phase2] Config loaded:",s.selectedConfig?.id),console.log("[Phase2] Loading meta-prompt for language:",_.language),await s.loadMetaPromptForLanguage(_.language),s.error&&console.error("[Phase2] Meta-prompt loading error:",s.error),console.log("[Phase2] Meta-prompt loaded:",s.metaPrompt?.substring(0,50)),x.value=s.metaPrompt||"",s.userInput&&(l.value=s.userInput),s.selectedConfig?.media_preferences?.default_output){const t=s.selectedConfig.media_preferences.default_output;console.log("[Phase2] Default output from config:",t);const p={image:"sd35_large",audio:"stable_audio_1",music:"acestep_instrumental",video:"video_default","3d":"3d_default"};A.value=p[t]||"sd35_large",console.log("[Phase2] Selected media config:",A.value)}else A.value="sd35_large";v.value!=="text_semantic_split"&&(Ce(),await qe(),_e(),window.addEventListener("resize",_e)),m.value=!1});function Ce(){if(h.value)for(let a=0;a<30;a++){const t=document.createElement("div");t.className="particle",t.style.left=Math.random()*100+"%",t.style.animationDelay=Math.random()*20+"s",t.style.animationDuration=15+Math.random()*10+"s",h.value.appendChild(t)}}function _e(){if(!r.value||!u.value||!g.value||!F.value||!R.value)return;const a=r.value.getBoundingClientRect(),t=u.value.getBoundingClientRect(),p=g.value.getBoundingClientRect(),I=p.left+p.width/2,E=p.top,H=a.left+a.width/2,J=a.bottom,Q=(H+I)/2,C=(J+E)/2;F.value.setAttribute("d",`M ${H} ${J} Q ${Q} ${C} ${I} ${E}`);const U=t.left+t.width/2,K=t.bottom,De=(U+I)/2,Oe=(K+E)/2;R.value.setAttribute("d",`M ${U} ${K} Q ${De} ${Oe} ${I} ${E}`)}async function xe(){if(!(!fe.value||!s.selectedConfig)){d.value=!0,k.value=1,w.value=null;try{s.updateUserInput(l.value),console.log("[Phase2] Starting transformation (Stage 1+2)..."),console.log("[Phase2] Config:",s.selectedConfig.id),console.log("[Phase2] Input:",l.value);const{transformPrompt:a}=await je(async()=>{const{transformPrompt:I}=await import("./pipelineExecution-BKUFF4Bc.js").then(E=>E.a);return{transformPrompt:I}},__vite__mapDeps([0,1,2]));k.value=1;const t={schema:s.selectedConfig.id,input_text:l.value,user_language:_.language,execution_mode:s.executionMode,safety_level:s.safetyLevel};s.metaPromptModified&&(t.context_prompt=s.metaPrompt,t.context_language=_.language,console.log("[Phase2] Passing edited context to backend (RAM-Proxy)"));const p=await a(t);if(k.value=2,await new Promise(I=>setTimeout(I,500)),!p.success)throw new Error(p.error||"Transformation failed");console.log("[Phase2] ‚úÖ Transformation complete!"),console.log("[Phase2] Stage 1:",p.stage1_output),console.log("[Phase2] Stage 2:",p.stage2_output),console.log("[Phase2] Total time:",p.execution_time_ms,"ms"),s.updateTransformedPrompt(p.transformed_prompt)}catch(a){w.value=a instanceof Error?a.message:"Transformation failed",console.error("[Phase2] Transformation error:",a)}finally{d.value=!1,k.value=0}}}function Se(){s.clearTransformedPrompt(),console.log("[Phase2] Cleared transformed prompt for re-transformation")}function Y(a){A.value=a,console.log("[Phase2] Selected media config:",a)}async function Te(a){if(console.log("[Phase2] handleMediaGeneration called:",{outputConfig:a,hasTransformedPrompt:!!P.value,hasSelectedConfig:!!s.selectedConfig,transformedPromptLength:P.value?.length}),!P.value||!a||!s.selectedConfig){console.warn("[Phase2] ‚ùå Generation blocked - missing requirements:",{transformedPrompt:!!P.value,outputConfig:!!a,selectedConfig:!!s.selectedConfig});return}console.log("[Phase2] ‚úÖ Starting media generation:",{outputConfig:a,transformedPrompt:P.value.substring(0,100)+"..."}),N.value=!0,O.value=0,L.value=null,w.value=null,V.value=0,q.value=0;const t={text:P.value,configId:s.selectedConfig.id};let p,I=!1;j.value&&j.value.text===t.text&&j.value.configId===t.configId?(p=Math.floor(Math.random()*(2**31-1)),I=!0,console.log("[Phase2] Same state ‚Üí new seed for variation + stage4_only:",p)):(p=ie.value,I=!1,console.log("[Phase2] State changed ‚Üí reusing seed for comparison + run full pipeline:",p)),ke.value=p;const E=3e4,H=300,J=90/E*H,Q=setInterval(()=>{O.value<90&&(O.value=Math.min(90,O.value+J))},H);try{const C=await ce({schema:s.selectedConfig.id,input_text:P.value,user_input:l.value,user_language:_.language,execution_mode:s.executionMode,safety_level:s.safetyLevel,output_config:a,stage4_only:I,seed:p});if(clearInterval(Q),C.status!=="success")throw new Error(C.error||"Pipeline execution failed");C.pipeline_visualization&&(ne.value=C.pipeline_visualization),C.execution_steps&&(pe.value=C.execution_steps),C.media_output&&(ge.value=C.media_output);const U=C.media_output?.run_id;if(!U)throw new Error("No run_id returned from API");ve.value=U,console.log("[Phase2] Generation complete, run_id:",U),O.value=100,L.value=`/api/media/image/${U}`,j.value=t;const K=C.media_output?.metadata?.seed;K?(ie.value=K,console.log("[Phase2] Seed from response:",K)):(ie.value=p,console.log("[Phase2] Using local seed:",p)),N.value=!1}catch(C){clearInterval(Q),console.error("[Phase2] Media generation error:",C),w.value=C instanceof Error?C.message:"Media generation failed",N.value=!1}}function he(){N.value=!1,L.value=null,O.value=0,V.value=0,q.value=0}async function Me(a){if(console.warn(`[Phase2] Image load failed, attempt ${V.value+1}/${le}`),V.value>=le){console.error("[Phase2] Image load failed after max retries"),w.value="Failed to load generated image. Please try again.",N.value=!1,L.value=null;return}V.value++;const t=Math.min(500*Math.pow(2,V.value-1),8e3);console.log(`[Phase2] Retrying image load in ${t}ms...`),await new Promise(E=>setTimeout(E,t));const p=Date.now(),I=ve.value;I&&(L.value=`/api/media/image/${I}?t=${p}`,q.value++)}function Fe(){console.log("[Phase2] ‚úÖ Image loaded successfully"),V.value>0&&console.log(`[Phase2] Image loaded after ${V.value} retries`)}function Re(){s.updateUserInput(l.value),P.value&&s.clearTransformedPrompt()}function Ae(){s.updateMetaPrompt(x.value),console.log("[Phase2] Meta-prompt edited:",x.value.substring(0,50)+"...")}function Ee(a){const t=a.target;s.updateTransformedPrompt(t.value)}function Be(){console.log("[Phase2] Transformed prompt editing complete")}function Ve(a){l.value=a,s.updateUserInput(a),s.clearTransformedPrompt()}function Le(){S.push({name:"property-selection"})}function ze(a){console.log("[Phase2] Vector Fusion generated:",a)}return ee(()=>$.params.configId,(a,t)=>{console.log("========================================"),console.log("[Phase2 WATCH] route.params.configId changed!"),console.log("[Phase2 WATCH] Old configId:",t),console.log("[Phase2 WATCH] New configId:",a),console.log("[Phase2 WATCH] Current editableMetaPrompt:",x.value?.substring(0,50)),console.log("[Phase2 WATCH] Current store.metaPrompt:",s.metaPrompt?.substring(0,50)),console.log("========================================")}),ee(()=>_.language,async a=>{console.log("[Phase2 WATCH] Language changed to:",a),await s.loadMetaPromptForLanguage(a),x.value=s.metaPrompt||""}),ee(()=>s.metaPrompt,(a,t)=>{console.log("[Phase2 WATCH] pipelineStore.metaPrompt changed!"),console.log("[Phase2 WATCH] Old:",t?.substring(0,50)),console.log("[Phase2 WATCH] New:",a?.substring(0,50)),console.log("[Phase2 WATCH] editableMetaPrompt before sync:",x.value?.substring(0,50)),x.value!==a?(x.value=a,console.log("[Phase2 WATCH] ‚Üí editableMetaPrompt updated")):console.log("[Phase2 WATCH] ‚Üí editableMetaPrompt NOT updated (values equal)")}),(a,t)=>(o(),i(W,null,[e("div",r4,[e("div",d4,[e("div",c4,[e("button",{class:"back-btn",onClick:Le}," ‚Üê "+n(a.$t("common.back")||"Zur√ºck"),1),e("div",u4,[e("div",v4,n(Ie.value),1)])])]),m.value?(o(),i("div",p4,[t[9]||(t[9]=e("div",{class:"loading-spinner"},"‚öôÔ∏è",-1)),e("div",g4,n(a.$t("common.loading")||"L√§dt..."),1)])):v.value==="text_semantic_split"?(o(),be(bs,{key:1,"config-id":X($).params.configId,"execution-mode":X(s).executionMode,"safety-level":X(s).safetyLevel,onGenerated:ze},null,8,["config-id","execution-mode","safety-level"])):(o(),i("div",m4,[e("div",{class:"particles",ref_key:"particlesRef",ref:h},null,512),(o(),i("svg",{class:"connections",ref_key:"connectionsRef",ref:B},[e("path",{class:"connection-line connection-input-result",ref_key:"line1Ref",ref:F},null,512),e("path",{class:"connection-line connection-meta-result",ref_key:"line2Ref",ref:R},null,512)],512)),e("div",f4,[e("div",_4,[e("div",{class:"card card-input",ref_key:"inputNodeRef",ref:r},[e("div",h4,[t[10]||(t[10]=e("div",{class:"card-icon"},"üí°",-1)),e("div",b4,n(a.$t("phase2.yourIdea")||"Deine Idee: Um WAS soll es hier gehen?"),1)]),re(e("textarea",{class:"card-input-area","onUpdate:modelValue":t[0]||(t[0]=p=>l.value=p),onInput:Re,placeholder:a.$t("phase2.writeYourText")||"Schreibe deinen Text...",maxlength:"500",ref_key:"inputTextareaRef",ref:G},null,40,$4),[[de,l.value]]),e("div",y4,[e("span",w4,n(l.value.length)+" / 500",1)])],512),e("div",{class:"card card-rules",ref_key:"metaNodeRef",ref:u},[e("div",k4,[t[11]||(t[11]=e("div",{class:"card-icon"},"üìã",-1)),e("div",P4,n(a.$t("phase2.rules")||"Deine Regeln: WIE soll Deine Idee umgesetzt werden?"),1)]),e("div",I4,[X(s).metaPrompt!==null?re((o(),i("textarea",{key:0,class:"rules-textarea","onUpdate:modelValue":t[1]||(t[1]=p=>x.value=p),onInput:Ae,placeholder:Pe.value==="en"?`Edit the transformation rules here. You can modify how the AI transforms your input.

Example:
- Use the style of...
- Transform it by...
- Add elements of...`:`Bearbeite hier die Transformationsregeln. Du kannst √§ndern, wie die KI deine Eingabe umwandelt.

Beispiel:
- Nutze den Stil von...
- Verwandle es durch...
- F√ºge Elemente von... hinzu`},null,40,C4)),[[de,x.value]]):(o(),i("div",x4,n(a.$t("common.loading")||"L√§dt..."),1))])],512)])]),d.value?(o(),i("div",S4,[t[12]||(t[12]=e("div",{class:"llm-icon rotating"},"‚öôÔ∏è",-1)),e("div",T4,[k.value===1?(o(),i("div",M4,n(a.$t("phase2.stage1")||"Stage 1: √úbersetzung + Sicherheit..."),1)):k.value===2?(o(),i("div",F4,n(a.$t("phase2.stage2")||"Stage 2: Transformation..."),1)):(o(),i("div",R4,n(a.$t("phase2.transforming")||"Transformiere..."),1))])])):b("",!0),e("div",{class:M(["result-panel",{"is-empty":!P.value,"is-filled":P.value}]),ref_key:"resultNodeRef",ref:g},[e("div",A4,[t[13]||(t[13]=e("div",{class:"result-icon"},"‚ú®",-1)),e("div",E4,n(a.$t("phase2.transformedPrompt")||"Transformierter Prompt"),1),P.value?(o(),i("div",B4,n(P.value.length),1)):b("",!0)]),P.value?(o(),i("textarea",{key:0,class:"result-textarea",value:P.value,onInput:Ee,onBlur:Be,ref_key:"transformedTextareaRef",ref:f},null,40,V4)):(o(),i("div",L4,[e("button",{class:"transform-btn-center",disabled:!fe.value||d.value,onClick:xe},[d.value?(o(),i("span",O4," ‚öôÔ∏è "+n(a.$t("phase2.aiWorking")||"KI arbeitet..."),1)):(o(),i("span",D4," ‚ú® "+n(a.$t("phase2.startAI")||"Los, KI, bearbeite meine Eingabe!"),1))],8,z4),d.value?b("",!0):(o(),i("div",G4,n(a.$t("phase2.stage12Time")||"~5-10 Sekunden"),1))]))],2),me.value.length>0?(o(),i("div",N4,[e("div",U4,n(a.$t("phase2.examples")||"Beispiele:"),1),(o(!0),i(W,null,se(me.value,(p,I)=>(o(),i("div",{key:I,class:"example-item",onClick:E=>Ve(p)},n(p),9,W4))),128))])):b("",!0),P.value?(o(),i("div",K4,[e("button",{class:"secondary-btn retransform-btn",disabled:d.value,onClick:Se}," üîÑ "+n(a.$t("phase2.reTransform")||"Noch mal anders"),9,H4)])):b("",!0),P.value?(o(),i("div",q4,[e("div",j4,n(a.$t("phase2.selectMedia")||"W√§hle dein Medium:"),1),e("div",Y4,[e("div",{class:M(["media-card",{active:A.value==="sd35_large"}]),onClick:t[2]||(t[2]=p=>Y("sd35_large")),title:"Stable Diffusion 3.5"},[t[14]||(t[14]=e("div",{class:"media-icon"},"üé®",-1)),t[15]||(t[15]=e("div",{class:"media-name"},"SD 3.5",-1)),e("div",J4,n(a.$t("phase2.mediaImage")||"Bild"),1)],2),e("div",{class:M(["media-card",{active:A.value==="gpt_image_1"}]),onClick:t[3]||(t[3]=p=>Y("gpt_image_1")),title:"GPT Image Generation"},[t[16]||(t[16]=e("div",{class:"media-icon"},"ü§ñ",-1)),t[17]||(t[17]=e("div",{class:"media-name"},"GPT Image",-1)),e("div",Q4,n(a.$t("phase2.mediaImage")||"Bild"),1)],2),e("div",{class:M(["media-card",{active:A.value==="stable_audio_1"}]),onClick:t[4]||(t[4]=p=>Y("stable_audio_1")),title:"Stable Audio"},[t[18]||(t[18]=e("div",{class:"media-icon"},"üéµ",-1)),t[19]||(t[19]=e("div",{class:"media-name"},"Stable Audio",-1)),e("div",X4,n(a.$t("phase2.mediaAudio")||"Sound"),1)],2),e("div",{class:M(["media-card",{active:A.value==="acestep_instrumental"}]),onClick:t[5]||(t[5]=p=>Y("acestep_instrumental")),title:"Ace Step Music"},[t[20]||(t[20]=e("div",{class:"media-icon"},"üé∂",-1)),t[21]||(t[21]=e("div",{class:"media-name"},"Ace Step",-1)),e("div",Z4,n(a.$t("phase2.mediaAudio")||"Sound"),1)],2),e("div",ea,[t[22]||(t[22]=e("div",{class:"media-icon"},"üìπ",-1)),t[23]||(t[23]=e("div",{class:"media-name"},"Video",-1)),e("div",ta,n(a.$t("phase2.comingSoon")||"Bald"),1)]),e("div",sa,[t[24]||(t[24]=e("div",{class:"media-icon"},"üßä",-1)),t[25]||(t[25]=e("div",{class:"media-name"},"3D",-1)),e("div",aa,n(a.$t("phase2.comingSoon")||"Bald"),1)])]),e("button",{class:"generate-media-btn",disabled:!A.value,onClick:t[6]||(t[6]=p=>Te(A.value))}," ‚ú® "+n(a.$t("phase2.generateMedia")||"Medium generieren"),9,oa)])):b("",!0)]))]),N.value||L.value?(o(),i("div",{key:0,class:"generation-overlay",onClick:we(he,["self"])},[e("div",na,[L.value?(o(),i("button",{key:0,class:"close-btn",onClick:he},"‚úï")):b("",!0),L.value?(o(),i("div",ia,[(o(),i("img",{src:L.value,key:q.value,class:"preview-image",style:te({opacity:Math.max(.2,O.value/100)}),alt:"Generated image",onError:Me,onLoad:Fe},null,44,la)),V.value>0?(o(),i("div",ra," üîÑ Retry "+n(V.value)+"/"+n(le),1)):b("",!0)])):(o(),i("div",da,[ye(Rs,{progress:O.value},null,8,["progress"]),e("p",ca,n(a.$t("phase3.generating")||"Bild wird generiert..."),1),e("p",ua,n(a.$t("phase3.generatingHint")||"~30 Sekunden"),1)])),ne.value?(o(),be(l4,{key:3,"input-text":l.value,"pipeline-visualization":ne.value,"execution-steps":pe.value,"final-output":ge.value,"is-executing":N.value,"show-pipeline-type":!1},null,8,["input-text","pipeline-visualization","execution-steps","final-output","is-executing"])):b("",!0)])])):b("",!0),w.value?(o(),i("div",{key:1,class:"error-toast",onClick:t[8]||(t[8]=p=>w.value=null)},[t[26]||(t[26]=e("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),e("div",va,[e("div",pa,n(a.$t("common.error")||"Fehler"),1),e("div",ga,n(w.value),1)]),e("button",{class:"error-close",onClick:t[7]||(t[7]=p=>w.value=null)},"‚úï")])):b("",!0)],64))}}),ha=oe(ma,[["__scopeId","data-v-4b5c49fd"]]);export{ha as default};
