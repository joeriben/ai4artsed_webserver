const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pipelineExecution-D86nB7A9.js","assets/index-Bm8csnZB.js","assets/index-DbwOhK_X.css"])))=>i.map(i=>d[i]);
import{e as ne,s as ue,r as u,b as x,c as r,g as k,a as e,v as te,t as n,x as se,i as Q,f as C,o as l,_ as ie,h as ve,l as Me,w as J,y as Fe,F as X,j as ae,n as Z,u as Ae,z as Re,A as Ee,k as Be,m as j,B as Le,p as Ve,C as De,q as Ge}from"./index-Bm8csnZB.js";import{e as oe,u as Ne,g as ze}from"./pipelineExecution-D86nB7A9.js";const Ue={class:"vector-fusion-flow"},We={key:0,class:"input-stage"},He={class:"input-container"},Ke={class:"stage-title"},Oe=["placeholder"],qe={class:"char-count"},Ye=["disabled"],je={key:0},Qe={key:1},Je={key:1,class:"split-flow-stage"},Ze={class:"flow-row"},Xe={class:"bubble bubble-input"},e4={class:"bubble-title"},t4={class:"bubble-text"},s4={class:"flow-row"},a4={class:"explanation-box"},o4={class:"explanation-text"},n4={class:"flow-row parallel"},i4={class:"bubble bubble-part-a"},l4={class:"bubble-title"},r4={class:"bubble-text"},d4={class:"bubble bubble-part-b"},c4={class:"bubble-title"},u4={class:"bubble-text"},v4={class:"flow-row"},p4={class:"explanation-box"},g4={class:"explanation-text"},m4={class:"flow-row"},f4={class:"explanation-box highlight"},h4={class:"explanation-text"},_4={class:"flow-row"},b4={class:"bubble bubble-fusion"},$4={class:"bubble-title"},y4={class:"bubble-text"},w4={class:"flow-row"},P4=["disabled"],k4={key:0},I4={key:1},C4={key:2,class:"results-stage"},S4={class:"stage-title"},x4={class:"images-grid"},T4={class:"image-header"},M4={class:"image-title"},F4={key:0,class:"image-container"},A4=["src"],R4={key:1,class:"image-placeholder"},E4={key:0,class:"spinner"},B4={key:1,class:"waiting"},L4={class:"image-caption"},V4={class:"image-header"},D4={class:"image-title"},G4={key:0,class:"image-container"},N4=["src"],z4={key:1,class:"image-placeholder"},U4={key:0,class:"spinner"},W4={key:1,class:"waiting"},H4={class:"image-caption"},K4={class:"image-header"},O4={class:"image-title"},q4={key:0,class:"image-container"},Y4=["src"],j4={key:1,class:"image-placeholder"},Q4={key:0,class:"spinner"},J4={key:1,class:"waiting"},Z4={class:"image-caption"},X4={class:"image-header"},et={class:"image-title"},tt={key:0,class:"image-container"},st=["src"],at={key:1,class:"image-placeholder"},ot={key:0,class:"spinner"},nt={key:1,class:"waiting"},it={class:"image-caption"},lt={key:0,class:"flow-row"},rt=ne({__name:"Phase2VectorFusionInterface",props:{configId:{},executionMode:{default:"eco"},safetyLevel:{default:"kids"}},emits:["generated"],setup(D,{emit:T}){const P=D,G=T,{t:z}=ue(),a=u("input"),m=u(""),f=u(null),R=u("linear"),S=u(!1),M=u(!1),v=u(0),h=u({original:"",splitA:"",splitB:"",fusion:""}),E=x(()=>m.value.trim().length>0);P.configId.includes("spherical")&&(R.value="spherical");async function U(){if(E.value){S.value=!0;try{console.log("[VectorFusion] Starting split...");const o={schema:P.configId,input_text:m.value,execution_mode:P.executionMode,safety_level:P.safetyLevel},i=await oe(o);if(i.status!=="success"||!i.final_output)throw new Error(i.error||"Split failed");console.log("[VectorFusion] Split complete:",i.final_output);const _=JSON.parse(i.final_output);f.value={part_a:_.part_a||"",part_b:_.part_b||""},a.value="split"}catch(o){console.error("[VectorFusion] Split error:",o),alert(`Split fehlgeschlagen: ${o instanceof Error?o.message:"Unknown error"}`)}finally{S.value=!1}}}async function g(){if(f.value){M.value=!0,a.value="generating",v.value=0;try{v.value=1,console.log("[VectorFusion] Generating original...");const o=await d(m.value,m.value,.5);h.value.original=`/api/media/${o.run_id}`,v.value=2,console.log("[VectorFusion] Generating split A...");const i=await d(f.value.part_a,f.value.part_a,0);h.value.splitA=`/api/media/${i.run_id}`,v.value=3,console.log("[VectorFusion] Generating split B...");const _=await d(f.value.part_b,f.value.part_b,1);h.value.splitB=`/api/media/${_.run_id}`,v.value=4,console.log("[VectorFusion] Generating fusion...");const b=await d(f.value.part_a,f.value.part_b,.5);h.value.fusion=`/api/media/${b.run_id}`,v.value=5,a.value="complete",console.log("[VectorFusion] ‚úÖ All images generated!"),b.run_id&&G("generated",b.run_id)}catch(o){console.error("[VectorFusion] Generation error:",o),alert(`Generierung fehlgeschlagen: ${o instanceof Error?o.message:"Unknown error"}`),a.value="split"}finally{M.value=!1}}}async function d(o,i,_){const I={schema:R.value==="linear"?"vector_fusion_linear_clip":"vector_fusion_spherical_clip",input_text:`${o} + ${i}`,execution_mode:P.executionMode,safety_level:P.safetyLevel,custom_placeholders:{PART_A:o,PART_B:i,ALPHA:_.toString()}},y=await oe(I);if(y.status!=="success"||!y.run_id)throw new Error(y.error||"Image generation failed");return y}function p(){a.value="input",m.value="",f.value=null,v.value=0,h.value={original:"",splitA:"",splitB:"",fusion:""}}return(o,i)=>(l(),r("div",Ue,[a.value==="input"?(l(),r("div",We,[e("div",He,[e("div",Ke,n(o.$t("vectorFusion.inputTitle")||"Beschreibe zwei Dinge zum Kombinieren"),1),te(e("textarea",{"onUpdate:modelValue":i[0]||(i[0]=_=>m.value=_),class:"main-input",placeholder:o.$t("vectorFusion.inputPlaceholder")||"z.B.: [ein Meteorit im Weltall] [ein silberner L√∂ffel]",rows:"4",maxlength:"500"},null,8,Oe),[[se,m.value]]),e("div",qe,n(m.value.length)+" / 500",1),e("button",{class:"split-btn",disabled:!E.value||S.value,onClick:U},[S.value?(l(),r("span",Qe," ‚öôÔ∏è "+n(o.$t("vectorFusion.splitting")||"Teile auf..."),1)):(l(),r("span",je," ‚úÇÔ∏è "+n(o.$t("vectorFusion.splitButton")||"Text aufteilen & visualisieren"),1))],8,Ye)])])):k("",!0),a.value==="split"?(l(),r("div",Je,[e("div",Ze,[e("div",Xe,[i[1]||(i[1]=e("div",{class:"bubble-icon"},"üí≠",-1)),e("div",e4,n(o.$t("vectorFusion.originalInput")||"Deine Eingabe"),1),e("div",t4,n(m.value),1)])]),i[8]||(i[8]=e("div",{class:"flow-arrow"},[e("div",{class:"arrow-line"}),e("div",{class:"arrow-head"},"‚Üì")],-1)),e("div",s4,[e("div",a4,[i[2]||(i[2]=e("div",{class:"explanation-icon"},"‚úÇÔ∏è",-1)),e("div",o4,n(o.$t("vectorFusion.splitExplanation")||"Die KI teilt deinen Text in zwei semantische Konzepte"),1)])]),i[9]||(i[9]=e("div",{class:"flow-arrow"},[e("div",{class:"arrow-line"}),e("div",{class:"arrow-head"},"‚Üì")],-1)),e("div",n4,[e("div",i4,[i[3]||(i[3]=e("div",{class:"bubble-icon"},"üîµ",-1)),e("div",l4,n(o.$t("vectorFusion.partA")||"Konzept A"),1),e("div",r4,n(f.value?.part_a),1)]),e("div",d4,[i[4]||(i[4]=e("div",{class:"bubble-icon"},"üü†",-1)),e("div",c4,n(o.$t("vectorFusion.partB")||"Konzept B"),1),e("div",u4,n(f.value?.part_b),1)])]),i[10]||(i[10]=Q('<div class="flow-row parallel" data-v-9db58391><div class="flow-arrow" data-v-9db58391><div class="arrow-line" data-v-9db58391></div><div class="arrow-head" data-v-9db58391>‚Üì</div></div><div class="flow-arrow" data-v-9db58391><div class="arrow-line" data-v-9db58391></div><div class="arrow-head" data-v-9db58391>‚Üì</div></div></div>',1)),e("div",v4,[e("div",p4,[i[5]||(i[5]=e("div",{class:"explanation-icon"},"üßÆ",-1)),e("div",g4,n(o.$t("vectorFusion.vectorExplanation")||"Beide Texte werden in semantische Vektoren umgewandelt (CLIP)"),1)])]),i[11]||(i[11]=Q('<div class="flow-row parallel" data-v-9db58391><div class="flow-arrow" data-v-9db58391><div class="arrow-line" data-v-9db58391></div><div class="arrow-head" data-v-9db58391>‚Üì</div></div><div class="flow-arrow" data-v-9db58391><div class="arrow-line" data-v-9db58391></div><div class="arrow-head" data-v-9db58391>‚Üì</div></div></div>',1)),e("div",m4,[e("div",f4,[i[6]||(i[6]=e("div",{class:"explanation-icon"},"‚ú®",-1)),e("div",h4,n(o.$t("vectorFusion.fusionExplanation")||"Die Vektoren werden im semantischen Raum kombiniert (SLERP)"),1)])]),i[12]||(i[12]=Q('<div class="flow-row converging" data-v-9db58391><div class="converging-arrows" data-v-9db58391><div class="arrow-left" data-v-9db58391>‚Üí</div><div class="arrow-merge" data-v-9db58391>‚Üì</div><div class="arrow-right" data-v-9db58391>‚Üê</div></div></div>',1)),e("div",_4,[e("div",b4,[i[7]||(i[7]=e("div",{class:"bubble-icon"},"üé®",-1)),e("div",$4,n(o.$t("vectorFusion.fusion")||"Fusion beider Konzepte"),1),e("div",y4,n(R.value==="linear"?"Linear (LERP)":"Spherical (SLERP)")+" @ Œ±=0.5",1)])]),e("div",w4,[e("button",{class:"generate-btn",disabled:M.value,onClick:g},[M.value?(l(),r("span",I4," ‚öôÔ∏è "+n(o.$t("vectorFusion.generating")||"Generiere..."),1)):(l(),r("span",k4," ‚ú® "+n(o.$t("vectorFusion.generateImages")||"4 Bilder generieren"),1))],8,P4)])])):k("",!0),a.value==="generating"||a.value==="complete"?(l(),r("div",C4,[e("div",S4,n(o.$t("vectorFusion.results")||"Ergebnisse"),1),e("div",x4,[e("div",{class:C(["image-card",{loading:v.value<1,active:v.value===1,complete:v.value>1}])},[e("div",T4,[i[13]||(i[13]=e("div",{class:"image-icon"},"üìù",-1)),e("div",M4,n(o.$t("vectorFusion.original")||"Original"),1)]),v.value>=1&&h.value.original?(l(),r("div",F4,[e("img",{src:h.value.original,alt:"Original"},null,8,A4)])):(l(),r("div",R4,[v.value===1?(l(),r("div",E4,"‚öôÔ∏è")):(l(),r("div",B4,"‚è≥"))])),e("div",L4,n(o.$t("vectorFusion.originalDesc")||"Ganzer Input"),1)],2),e("div",{class:C(["image-card",{loading:v.value<2,active:v.value===2,complete:v.value>2}])},[e("div",V4,[i[14]||(i[14]=e("div",{class:"image-icon"},"üîµ",-1)),e("div",D4,n(o.$t("vectorFusion.partA")||"Konzept A"),1)]),v.value>=2&&h.value.splitA?(l(),r("div",G4,[e("img",{src:h.value.splitA,alt:"Split A"},null,8,N4)])):(l(),r("div",z4,[v.value===2?(l(),r("div",U4,"‚öôÔ∏è")):(l(),r("div",W4,"‚è≥"))])),e("div",H4,n(f.value?.part_a),1)],2),e("div",{class:C(["image-card",{loading:v.value<3,active:v.value===3,complete:v.value>3}])},[e("div",K4,[i[15]||(i[15]=e("div",{class:"image-icon"},"üü†",-1)),e("div",O4,n(o.$t("vectorFusion.partB")||"Konzept B"),1)]),v.value>=3&&h.value.splitB?(l(),r("div",q4,[e("img",{src:h.value.splitB,alt:"Split B"},null,8,Y4)])):(l(),r("div",j4,[v.value===3?(l(),r("div",Q4,"‚öôÔ∏è")):(l(),r("div",J4,"‚è≥"))])),e("div",Z4,n(f.value?.part_b),1)],2),e("div",{class:C(["image-card",{loading:v.value<4,active:v.value===4,complete:v.value>4}])},[e("div",X4,[i[16]||(i[16]=e("div",{class:"image-icon"},"‚ú®",-1)),e("div",et,n(o.$t("vectorFusion.fusion")||"Fusion"),1)]),v.value>=4&&h.value.fusion?(l(),r("div",tt,[e("img",{src:h.value.fusion,alt:"Fusion"},null,8,st)])):(l(),r("div",at,[v.value===4?(l(),r("div",ot,"‚öôÔ∏è")):(l(),r("div",nt,"‚è≥"))])),e("div",it,n(o.$t("vectorFusion.fusionDesc")||"A ‚äï B (Œ±=0.5)"),1)],2)]),a.value==="complete"?(l(),r("div",lt,[e("button",{class:"reset-btn",onClick:p}," üîÑ "+n(o.$t("vectorFusion.reset")||"Neu beginnen"),1)])):k("",!0)])):k("",!0)]))}}),dt=ie(rt,[["__scopeId","data-v-9db58391"]]),ct={class:"progress-animation-container"},ut={class:"token-processing-scene"},vt={class:"generating-text"},pt={class:"input-grid-container"},gt={class:"canvas-grid"},mt={class:"output-grid-container"},ft={class:"canvas-grid"},ht={class:"progress-bar-container"},_t={class:"progress-bar-bg"},bt={class:"progress-text"},$t=196,yt=ne({__name:"SpriteProgressAnimation",props:{progress:{}},setup(D){const T=D,P=x(()=>{const g=Math.min(T.progress/90,1);return Math.floor(g*$t)}),G=x(()=>T.progress>0&&T.progress<100),z=u(0);let a=null;const m=["#3498db","#9b59b6","#e74c3c","#2ecc71","#f39c12","#1abc9c","#e91e63"],f={robot:{pattern:[[0,0,0,0,4,4,4,4,4,4,0,0,0,0],[0,0,0,4,1,1,1,1,1,1,4,0,0,0],[0,0,4,1,6,6,1,1,6,6,1,4,0,0],[0,0,4,1,6,6,1,1,6,6,1,4,0,0],[0,0,4,1,1,1,5,5,1,1,1,4,0,0],[0,0,0,4,1,5,5,5,5,1,4,0,0,0],[0,0,0,0,4,4,4,4,4,4,0,0,0,0],[0,0,0,2,2,2,2,2,2,2,2,0,0,0],[0,0,2,2,2,2,2,2,2,2,2,2,0,0],[0,0,2,2,4,2,2,2,2,4,2,2,0,0],[0,0,2,2,2,2,2,2,2,2,2,2,0,0],[0,0,0,2,2,2,2,2,2,2,2,0,0,0],[0,0,3,3,3,0,0,0,0,3,3,3,0,0],[0,0,3,3,3,0,0,0,0,3,3,3,0,0]]},flower:{pattern:[[0,0,0,0,0,7,7,7,7,0,0,0,0,0],[0,0,0,0,7,7,6,6,7,7,0,0,0,0],[0,0,0,7,7,6,6,6,6,7,7,0,0,0],[0,0,7,7,6,6,6,6,6,6,7,7,0,0],[0,7,7,6,6,6,5,5,6,6,6,7,7,0],[0,7,6,6,6,5,5,5,5,6,6,6,7,0],[0,7,6,6,6,5,5,5,5,6,6,6,7,0],[0,7,7,6,6,6,5,5,6,6,6,7,7,0],[0,0,7,7,6,6,6,6,6,6,7,7,0,0],[0,0,0,7,7,6,4,4,6,7,7,0,0,0],[0,0,0,0,4,4,4,4,4,4,0,0,0,0],[0,0,0,0,0,4,4,4,4,0,0,0,0,0],[0,0,0,0,0,0,4,4,0,0,0,0,0,0],[0,0,0,0,0,0,4,4,0,0,0,0,0,0]]},football:{pattern:[[0,0,0,0,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,0,0,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,0,0,0,1,1,0],[0,1,1,0,0,1,1,1,1,0,0,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,0,0,1,1,1,1,0,0,1,1,0],[0,1,1,0,0,0,1,1,0,0,0,1,1,0],[0,0,1,1,0,0,1,1,0,0,1,1,0,0],[0,0,0,1,1,1,1,1,1,1,1,0,0,0],[0,0,0,0,1,1,1,1,1,1,0,0,0,0]]},heart:{pattern:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,3,3,3,0,0,0,3,3,3,0,0,0],[0,3,3,7,3,3,0,3,3,7,3,3,0,0],[0,3,7,7,7,3,3,3,7,7,7,3,0,0],[0,3,7,7,7,7,3,7,7,7,7,3,0,0],[0,3,7,7,7,7,7,7,7,7,7,3,0,0],[0,0,3,7,7,7,7,7,7,7,3,0,0,0],[0,0,0,3,7,7,7,7,7,3,0,0,0,0],[0,0,0,0,3,7,7,7,3,0,0,0,0,0],[0,0,0,0,0,3,7,3,0,0,0,0,0,0],[0,0,0,0,0,0,3,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},star:{pattern:[[0,0,0,0,0,0,5,5,0,0,0,0,0,0],[0,0,0,0,0,0,5,5,0,0,0,0,0,0],[0,0,0,0,0,5,5,5,5,0,0,0,0,0],[0,0,0,0,0,5,5,5,5,0,0,0,0,0],[0,0,0,0,5,5,5,5,5,5,0,0,0,0],[5,5,5,5,5,5,5,5,5,5,5,5,5,5],[0,5,5,5,5,5,5,5,5,5,5,5,5,0],[0,0,5,5,5,5,5,5,5,5,5,5,0,0],[0,0,0,5,5,5,5,5,5,5,5,0,0,0],[0,0,5,5,5,0,5,5,0,5,5,5,0,0],[0,5,5,5,0,0,5,5,0,0,5,5,5,0],[5,5,5,0,0,0,5,5,0,0,0,5,5,5],[5,5,0,0,0,0,0,0,0,0,0,0,5,5],[0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},house:{pattern:[[0,0,0,0,0,0,3,3,0,0,0,0,0,0],[0,0,0,0,0,3,3,3,3,0,0,0,0,0],[0,0,0,0,3,3,3,3,3,3,0,0,0,0],[0,0,0,3,3,3,3,3,3,3,3,0,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,0,0],[0,0,2,2,2,2,2,2,2,2,2,2,0,0],[0,0,2,2,6,6,2,2,6,6,2,2,0,0],[0,0,2,2,6,6,2,2,6,6,2,2,0,0],[0,0,2,2,2,2,2,2,2,2,2,2,0,0],[0,0,2,2,2,2,2,2,2,2,2,2,0,0],[0,0,2,2,4,4,4,4,2,2,2,2,0,0],[0,0,2,2,4,4,4,4,2,2,2,2,0,0],[0,0,2,2,4,4,4,4,2,2,2,2,0,0],[0,0,2,2,4,4,4,4,2,2,2,2,0,0]]},tree:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4]]},moon:{pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,6,6,6,6,6,1,1,1,1,1,1],[1,1,6,6,6,6,6,6,6,1,1,1,1,1],[1,6,6,6,6,6,6,6,6,6,1,1,1,1],[1,6,6,6,6,6,6,6,6,6,1,1,1,1],[1,6,6,6,6,6,6,6,6,1,1,1,1,1],[1,6,6,6,6,6,6,6,1,1,1,1,1,1],[1,1,6,6,6,6,6,1,1,1,1,1,1,1],[1,1,1,6,6,6,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1]]},sun:{pattern:[[4,4,4,4,4,4,5,4,4,4,4,4,4,4],[4,4,4,4,4,4,5,4,4,4,4,4,4,4],[4,4,4,4,4,5,5,5,4,4,4,4,4,4],[4,5,4,4,5,5,5,5,5,4,4,5,4,4],[4,4,5,5,5,5,5,5,5,5,5,4,4,4],[4,4,4,5,5,5,5,5,5,5,4,4,4,4],[5,4,5,5,5,5,5,5,5,5,5,4,5,4],[4,4,5,5,5,5,5,5,5,5,5,4,4,4],[4,4,4,5,5,5,5,5,5,5,4,4,4,4],[4,4,5,5,5,5,5,5,5,5,5,4,4,4],[4,5,4,4,5,5,5,5,5,4,4,5,4,4],[4,4,4,4,4,5,5,5,4,4,4,4,4,4],[4,4,4,4,4,4,5,4,4,4,4,4,4,4],[4,4,4,4,4,4,5,4,4,4,4,4,4,4]]},earth:{pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,4,4,4,1,1,1,1,1,1],[1,1,1,1,4,4,4,4,4,1,1,1,1,1],[1,1,1,4,4,1,1,4,4,4,1,1,1,1],[1,1,1,4,1,1,1,1,4,4,1,1,1,1],[1,1,1,4,1,1,1,1,4,4,4,1,1,1],[1,1,1,4,4,1,1,4,4,4,4,1,1,1],[1,1,1,1,4,4,4,4,4,4,1,1,1,1],[1,1,1,1,1,4,4,4,4,1,1,1,1,1],[1,1,1,1,1,1,4,4,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1]]},mountains:{pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,3,3,2,2,2,2,2,2],[2,2,2,2,2,3,3,3,3,2,2,2,2,2],[2,2,3,3,3,3,3,3,3,3,2,2,2,2],[2,3,3,3,3,3,3,3,3,3,3,2,2,2],[3,3,3,3,3,3,6,3,3,3,3,3,2,2],[3,3,3,3,3,6,6,6,3,3,3,3,3,2],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},river:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,1,1,1,1,4,4,4,4,4,4,4],[4,4,4,4,1,1,1,1,4,4,4,4,4,4],[4,4,4,4,4,1,1,1,1,4,4,4,4,4],[4,4,4,4,4,4,1,1,1,1,4,4,4,4],[4,4,4,4,4,4,4,1,1,1,1,4,4,4],[4,4,4,4,4,4,1,1,1,1,4,4,4,4],[4,4,4,4,4,1,1,1,1,4,4,4,4,4],[4,4,4,4,1,1,1,1,4,4,4,4,4,4],[4,4,4,1,1,1,1,4,4,4,4,4,4,4],[4,4,1,1,1,1,4,4,4,4,4,4,4,4],[4,1,1,1,1,4,4,4,4,4,4,4,4,4],[1,1,1,1,4,4,4,4,4,4,4,4,4,4],[1,1,1,4,4,4,4,4,4,4,4,4,4,4]]},portal:{pattern:[[2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,7,7,7,7,7,7,2,2,2,2],[2,2,2,7,7,2,2,2,2,7,7,2,2,2],[2,2,7,7,2,6,6,6,6,2,7,7,2,2],[2,2,7,2,6,6,1,1,6,6,2,7,2,2],[2,2,7,2,6,1,1,1,1,6,2,7,2,2],[2,2,7,2,6,1,1,1,1,6,2,7,2,2],[2,2,7,2,6,6,1,1,6,6,2,7,2,2],[2,2,7,7,2,6,6,6,6,2,7,7,2,2],[2,2,2,7,7,2,2,2,2,7,7,2,2,2],[2,2,2,2,7,7,7,7,7,7,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2,2,2,2,2]]},rocket:{pattern:[[1,1,1,1,1,1,3,3,1,1,1,1,1,1],[1,1,1,1,1,3,3,3,3,1,1,1,1,1],[1,1,1,1,1,3,3,3,3,1,1,1,1,1],[1,1,1,1,1,2,2,2,2,1,1,1,1,1],[1,1,1,1,1,2,6,6,2,1,1,1,1,1],[1,1,1,1,1,2,6,6,2,1,1,1,1,1],[1,1,1,1,1,2,2,2,2,1,1,1,1,1],[1,1,1,1,1,2,2,2,2,1,1,1,1,1],[1,1,1,1,3,2,2,2,2,3,1,1,1,1],[1,1,1,3,3,2,2,2,2,3,3,1,1,1],[1,1,1,3,3,5,5,5,5,3,3,1,1,1],[1,1,1,1,5,5,5,5,5,5,1,1,1,1],[1,1,1,1,1,5,5,5,5,1,1,1,1,1],[1,1,1,1,1,1,5,5,1,1,1,1,1,1]]},sunset:{pattern:[[5,5,5,5,5,5,5,5,5,5,5,5,5,5],[5,5,5,5,5,5,5,5,5,5,5,5,5,5],[5,5,5,5,5,5,5,5,5,5,5,5,5,5],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,5,5,5,5,5,5,4,4,4,4,4],[4,4,5,5,5,5,5,5,5,5,4,4,4,4],[4,4,5,5,5,5,5,5,5,5,4,4,4,4],[4,4,4,5,5,5,5,5,5,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[6,6,6,6,6,6,6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6,6,6,6,6,6,6]]},alien:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,2,2,2,2,2,2,4,4,4,4],[4,4,4,2,2,2,2,2,2,2,2,4,4,4],[4,4,2,2,1,1,2,2,1,1,2,2,4,4],[4,4,2,2,1,1,2,2,1,1,2,2,4,4],[4,4,2,2,2,2,2,2,2,2,2,2,4,4],[4,4,4,2,2,1,1,1,1,2,2,4,4,4],[4,4,4,2,1,1,1,1,1,1,2,4,4,4],[4,4,4,4,2,2,2,2,2,2,4,4,4,4],[4,4,4,4,2,4,4,4,4,2,4,4,4,4],[4,4,4,2,2,4,4,4,4,2,2,4,4,4],[4,4,4,2,2,4,4,4,4,2,2,4,4,4]]},cat:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,5,5,4,4,4,4,5,5,4,4,4],[4,4,4,5,5,4,4,4,4,5,5,4,4,4],[4,4,4,5,5,5,4,4,5,5,5,4,4,4],[4,4,4,5,5,5,5,5,5,5,5,4,4,4],[4,4,4,5,5,5,5,5,5,5,5,4,4,4],[4,4,4,5,1,5,5,5,5,1,5,4,4,4],[4,4,4,5,1,5,5,5,5,1,5,4,4,4],[4,4,4,5,5,5,7,7,5,5,5,4,4,4],[4,4,4,5,5,7,7,7,7,5,5,4,4,4],[4,4,4,5,5,5,7,7,5,5,5,4,4,4],[4,4,4,4,5,5,5,5,5,5,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},dog:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,5,5,4,4,4,4,4,4,5,5,4,4],[4,4,5,5,5,4,4,4,4,5,5,5,4,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,4,5,1,1,5,5,1,1,5,4,4,4],[4,4,4,5,1,1,5,5,1,1,5,4,4,4],[4,4,4,5,5,5,3,3,5,5,5,4,4,4],[4,4,4,5,5,3,3,3,3,5,5,4,4,4],[4,4,4,5,5,5,3,3,5,5,5,4,4,4],[4,4,4,4,5,5,5,5,5,5,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},bird:{pattern:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,5,5,1,1,1,1,1,1,1],[1,1,1,1,5,5,5,5,1,1,1,1,1,1],[1,1,1,5,5,5,5,5,5,1,1,1,1,1],[1,1,5,5,5,5,5,5,5,5,1,1,1,1],[1,5,5,5,5,5,5,5,5,5,5,1,1,1],[1,5,5,1,5,5,5,5,5,5,5,5,1,1],[5,5,5,1,5,5,5,5,5,5,5,5,5,1],[5,5,5,5,5,5,5,5,5,5,5,5,5,5],[1,5,5,5,5,5,5,5,5,5,5,5,5,1],[1,1,5,5,5,5,5,5,5,5,5,5,1,1],[1,1,1,5,5,5,5,5,5,5,5,1,1,1],[1,1,1,1,5,5,1,1,5,5,1,1,1,1],[1,1,1,1,5,5,1,1,5,5,1,1,1,1]]},pig:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,7,7,4,4,4,4,7,7,4,4,4],[4,4,4,7,7,7,4,4,7,7,7,4,4,4],[4,4,7,7,7,7,7,7,7,7,7,7,4,4],[4,4,7,7,7,7,7,7,7,7,7,7,4,4],[4,4,7,7,7,7,7,7,7,7,7,7,4,4],[4,4,7,1,1,7,7,7,7,1,1,7,4,4],[4,4,7,1,1,7,7,7,7,1,1,7,4,4],[4,4,7,7,7,7,3,3,7,7,7,7,4,4],[4,4,7,7,7,3,3,3,3,7,7,7,4,4],[4,4,7,7,7,3,3,3,3,7,7,7,4,4],[4,4,4,7,7,7,7,7,7,7,7,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},cow:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,3,3,4,4,4,4,4,4,3,3,4,4],[4,4,3,3,3,4,4,4,4,3,3,3,4,4],[4,4,6,6,6,6,6,6,6,6,6,6,4,4],[4,4,6,3,6,6,6,6,6,6,3,6,4,4],[4,4,6,6,6,6,6,6,6,6,6,6,4,4],[4,4,6,1,1,6,6,6,6,1,1,6,4,4],[4,4,6,1,1,6,6,6,6,1,1,6,4,4],[4,4,6,6,6,6,7,7,6,6,6,6,4,4],[4,4,6,6,6,7,7,7,7,6,6,6,4,4],[4,4,6,6,6,7,7,7,7,6,6,6,4,4],[4,4,4,6,6,6,6,6,6,6,6,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},horse:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,3,3,4,4,4,4,4],[4,4,4,4,4,4,3,3,3,3,4,4,4,4],[4,4,4,4,4,3,3,3,3,3,3,4,4,4],[4,4,4,4,3,3,3,3,3,3,3,3,4,4],[4,4,4,3,3,3,3,3,3,3,3,3,4,4],[4,4,4,3,3,3,3,3,3,3,3,3,4,4],[4,4,4,3,1,1,3,3,3,3,3,3,4,4],[4,4,4,3,1,1,3,3,3,3,3,3,4,4],[4,4,4,3,3,3,3,7,7,3,3,3,4,4],[4,4,4,3,3,3,7,7,7,7,3,3,4,4],[4,4,4,3,3,3,3,7,7,3,3,3,4,4],[4,4,4,4,3,3,3,3,3,3,3,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},camel:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,5,5,4,4,5,5,4,4,4,4],[4,4,4,5,5,5,5,5,5,5,5,4,4,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,5,1,1,5,5,5,5,5,5,5,4,4],[4,4,5,1,1,5,5,5,5,5,5,5,4,4],[4,4,5,5,5,5,3,3,5,5,5,5,4,4],[4,4,5,5,5,3,3,3,3,5,5,5,4,4],[4,4,5,5,5,5,3,3,5,5,5,5,4,4],[4,4,4,5,5,5,5,5,5,5,5,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},pizza:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,5,5,4,4,4,4,4,4],[4,4,4,4,4,5,5,5,5,4,4,4,4,4],[4,4,4,4,5,5,3,5,5,5,4,4,4,4],[4,4,4,5,5,5,5,5,3,5,5,4,4,4],[4,4,5,5,3,5,5,5,5,5,5,5,4,4],[4,4,5,5,5,5,5,3,5,5,3,5,4,4],[4,5,5,5,3,5,5,5,5,5,5,5,5,4],[4,5,5,5,5,5,5,3,5,5,5,5,5,4],[4,5,5,5,5,5,5,5,5,5,5,5,5,4],[4,4,5,5,5,5,5,5,5,5,5,5,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},cake:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,5,5,4,4,4,4,4,4],[4,4,4,4,4,4,5,5,4,4,4,4,4,4],[4,4,4,4,4,3,7,7,3,4,4,4,4,4],[4,4,4,4,4,7,7,7,7,4,4,4,4,4],[4,4,4,4,4,7,7,7,7,4,4,4,4,4],[4,4,4,4,7,7,7,7,7,7,4,4,4,4],[4,4,4,7,7,7,7,7,7,7,7,4,4,4],[4,4,4,7,6,7,7,7,7,6,7,4,4,4],[4,4,7,7,7,7,6,6,7,7,7,7,4,4],[4,4,7,6,7,7,7,7,7,7,6,7,4,4],[4,4,7,7,7,7,7,7,7,7,7,7,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]},cupcake:{pattern:[[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4],[4,4,4,4,4,4,3,3,4,4,4,4,4,4],[4,4,4,4,4,4,5,5,4,4,4,4,4,4],[4,4,4,4,4,4,5,5,4,4,4,4,4,4],[4,4,4,4,4,7,7,7,7,4,4,4,4,4],[4,4,4,4,7,7,7,7,7,7,4,4,4,4],[4,4,4,7,7,7,7,7,7,7,7,4,4,4],[4,4,4,7,7,6,7,7,6,7,7,4,4,4],[4,4,4,4,7,7,7,7,7,7,4,4,4,4],[4,4,4,4,2,7,7,7,7,2,4,4,4,4],[4,4,4,4,2,2,7,7,2,2,4,4,4,4],[4,4,4,4,4,2,2,2,2,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4,4,4,4,4]]}},R=Object.keys(f),S=u("robot"),M=x(()=>f[S.value]),v=x(()=>{const g=[];for(let d=0;d<14;d++)for(let p=0;p<14;p++){const o=(d*14+p)%7+1;g.push({colorIndex:o,row:d,col:p})}return g}),h=x(()=>{const g=M.value.pattern,d=[];for(let p=0;p<14;p++)for(let o=0;o<14;o++){const i=g[p]?.[o]??0;d.push({colorIndex:i,row:p,col:o})}return d});ve(()=>{const g=Math.floor(Math.random()*R.length),d=R[g];d&&(S.value=d)}),Me(()=>{a!==null&&clearInterval(a)}),J(()=>T.progress,(g,d)=>{g>0&&d===0&&(z.value=0,a!==null&&clearInterval(a),a=setInterval(()=>{z.value++},1e3)),(g>=100||g===0)&&a!==null&&(clearInterval(a),a=null)});function E(g,d){const p=m[g.colorIndex-1];return{backgroundColor:p,boxShadow:`0 0 6px ${p}80, inset 0 0 3px rgba(255,255,255,0.2)`,animationDelay:d*.005+"s"}}function U(g,d){const p=h.value[d],o=v.value[d];if(d===P.value-1&&G.value&&o&&p){const _=m[o.colorIndex-1],b=p.colorIndex>0?m[p.colorIndex-1]:"transparent";return{"--from-color":_,"--to-color":b,animationDelay:d*.005+"s",opacity:p.colorIndex===0?0:1}}const i=g.colorIndex>0?m[g.colorIndex-1]:"transparent";return{backgroundColor:i,boxShadow:g.colorIndex>0?`0 0 8px ${i}80, inset 0 0 4px rgba(255,255,255,0.3)`:"none",animationDelay:d*.005+"s",opacity:g.colorIndex===0?0:1}}return(g,d)=>(l(),r("div",ct,[e("div",ut,[e("div",vt,[Fe("generating "+n(z.value)+" sec.",1),d[0]||(d[0]=e("span",{class:"cursor"},"_",-1))]),e("div",pt,[e("div",gt,[(l(!0),r(X,null,ae(v.value,(p,o)=>(l(),r("div",{key:"input-"+o,class:C(["pixel-token",{hidden:o<P.value}]),style:Z(E(p,o))},null,6))),128))])]),e("div",{class:C(["processor-box",{active:G.value}])},[...d[1]||(d[1]=[Q('<div class="processor-glow" data-v-a7a5f73a></div><div class="processor-core" data-v-a7a5f73a><div class="neural-network" data-v-a7a5f73a><div class="network-node node-1" data-v-a7a5f73a></div><div class="network-node node-2" data-v-a7a5f73a></div><div class="network-node node-3" data-v-a7a5f73a></div><div class="network-node node-4" data-v-a7a5f73a></div><div class="network-node node-5" data-v-a7a5f73a></div><div class="network-connection conn-1" data-v-a7a5f73a></div><div class="network-connection conn-2" data-v-a7a5f73a></div><div class="network-connection conn-3" data-v-a7a5f73a></div><div class="network-connection conn-4" data-v-a7a5f73a></div></div><div class="processor-icon" data-v-a7a5f73a>‚ö°</div></div>',2)])],2),e("div",mt,[e("div",ft,[(l(!0),r(X,null,ae(h.value,(p,o)=>(l(),r("div",{key:"output-"+o,class:C(["pixel-token",{visible:o<P.value,flying:o===P.value-1&&G.value}]),style:Z(U(p,o))},null,6))),128))])]),e("div",ht,[e("div",_t,[e("div",{class:"progress-bar-fill",style:Z({width:D.progress+"%"})},[...d[2]||(d[2]=[e("div",{class:"progress-shine"},null,-1)])],4)]),e("div",bt,n(Math.round(D.progress))+"%",1)])])]))}}),wt=ie(yt,[["__scopeId","data-v-a7a5f73a"]]),Pt={class:"app-container"},kt={class:"top-bar"},It={class:"top-left"},Ct={class:"config-info"},St={class:"config-name"},xt={key:0,class:"loading-container"},Tt={class:"loading-text"},Mt={key:2,class:"canvas-container"},Ft={class:"cards-wrapper"},At={class:"cards-container"},Rt={class:"card-header"},Et={class:"card-title"},Bt=["placeholder"],Lt={class:"card-footer"},Vt={class:"char-count"},Dt={class:"card-header"},Gt={class:"card-title"},Nt={class:"card-content scrollable"},zt=["placeholder"],Ut={key:1,class:"loading-text"},Wt={key:0,class:"llm-indicator"},Ht={class:"llm-text"},Kt={key:0},Ot={key:1},qt={key:2},Yt={class:"result-header"},jt={class:"result-title"},Qt={key:0,class:"char-count"},Jt=["value"],Zt={key:1,class:"result-empty-with-button"},Xt=["disabled"],es={key:0},ts={key:1},ss={key:0,class:"transform-hint"},as={key:1,class:"examples-panel"},os={class:"panel-title"},ns=["onClick"],is={key:2,class:"execute-panel"},ls=["disabled"],rs={key:3,class:"media-selection-panel"},ds={class:"media-section-title"},cs={class:"media-cards-row"},us={class:"media-type"},vs={class:"media-type"},ps={class:"media-type"},gs={class:"media-type"},ms={class:"media-card disabled",title:"Coming Soon"},fs={class:"media-type"},hs={class:"media-card disabled",title:"Coming Soon"},_s={class:"media-type"},bs=["disabled"],$s={class:"overlay-content"},ys={key:1,class:"preview-container"},ws=["src"],Ps={key:2,class:"loading-indicator"},ks={class:"generating-text"},Is={class:"loading-hint"},Cs={class:"error-content"},Ss={class:"error-title"},xs={class:"error-message"},Ts=ne({__name:"Phase2CreativeFlowView",setup(D){const T=Re(),P=Ge(),{t:G,locale:z}=ue(),a=Ne(),m=Ae(),f=u(null),R=u(null),S=u(null),M=u(null),v=u(null),h=u(null),E=u(null),U=u(null),g=u(null),d=u(null),p=u(!0),o=u(""),i=u(!1),_=u(0),b=u(null),I=u(""),y=u(""),W=u(!1),B=u(0),L=u(null),pe=u(null),K=u(null),ee=u(123456789),ge=u(null),$=x(()=>a.transformedPrompt),me=x(()=>m.language),le=u(["Eine kleine Maus auf einem Fahrrad","Der alte Mann und das Meer","Elektrische Schafe"]),fe=x(()=>{if(!a.selectedConfig)return"";const s=m.language;return a.selectedConfig.name[s]||a.selectedConfig.name.en||a.selectedConfig.id}),re=x(()=>o.value.trim().length>0&&a.selectedConfig);x(()=>$.value.trim().length>0),ve(async()=>{const s=T.params.configId;if(console.log("========================================"),console.log("[Phase2 LIFECYCLE] onMounted() called"),console.log("[Phase2 LIFECYCLE] configId:",s),console.log("[Phase2 LIFECYCLE] Current store.metaPrompt:",a.metaPrompt?.substring(0,50)),console.log("========================================"),console.log("[Phase2] Mounting with configId:",s),!s){b.value="No config ID provided",p.value=!1;return}try{const t=await ze(s);d.value=t.pipeline_type,console.log("[Phase2] Pipeline type:",d.value)}catch(t){console.error("[Phase2] Failed to load pipeline metadata:",t)}if(console.log("[Phase2] Loading config..."),await a.setConfig(s),a.error){console.error("[Phase2] Config loading error:",a.error),b.value=a.error;return}if(console.log("[Phase2] Config loaded:",a.selectedConfig?.id),console.log("[Phase2] Loading meta-prompt for language:",m.language),await a.loadMetaPromptForLanguage(m.language),a.error&&console.error("[Phase2] Meta-prompt loading error:",a.error),console.log("[Phase2] Meta-prompt loaded:",a.metaPrompt?.substring(0,50)),y.value=a.metaPrompt||"",a.userInput&&(o.value=a.userInput),a.selectedConfig?.media_preferences?.default_output){const t=a.selectedConfig.media_preferences.default_output;console.log("[Phase2] Default output from config:",t);const c={image:"sd35_large",audio:"stableaudio",music:"acestep_instrumental",video:"video_default","3d":"3d_default"};I.value=c[t]||"sd35_large",console.log("[Phase2] Selected media config:",I.value)}else I.value="sd35_large";d.value!=="text_semantic_split"&&(he(),await Ee(),de(),window.addEventListener("resize",de)),p.value=!1});function he(){if(f.value)for(let s=0;s<30;s++){const t=document.createElement("div");t.className="particle",t.style.left=Math.random()*100+"%",t.style.animationDelay=Math.random()*20+"s",t.style.animationDuration=15+Math.random()*10+"s",f.value.appendChild(t)}}function de(){if(!v.value||!h.value||!E.value||!S.value||!M.value)return;const s=v.value.getBoundingClientRect(),t=h.value.getBoundingClientRect(),c=E.value.getBoundingClientRect(),w=c.left+c.width/2,A=c.top,H=s.left+s.width/2,q=s.bottom,Y=(H+w)/2,F=(q+A)/2;S.value.setAttribute("d",`M ${H} ${q} Q ${Y} ${F} ${w} ${A}`);const V=t.left+t.width/2,N=t.bottom,xe=(V+w)/2,Te=(N+A)/2;M.value.setAttribute("d",`M ${V} ${N} Q ${xe} ${Te} ${w} ${A}`)}async function _e(){if(!(!re.value||!a.selectedConfig)){i.value=!0,_.value=1,b.value=null;try{a.updateUserInput(o.value),console.log("[Phase2] Starting transformation (Stage 1+2)..."),console.log("[Phase2] Config:",a.selectedConfig.id),console.log("[Phase2] Input:",o.value);const{transformPrompt:s}=await De(async()=>{const{transformPrompt:w}=await import("./pipelineExecution-D86nB7A9.js").then(A=>A.a);return{transformPrompt:w}},__vite__mapDeps([0,1,2]));_.value=1;const t={schema:a.selectedConfig.id,input_text:o.value,user_language:m.language,execution_mode:a.executionMode,safety_level:a.safetyLevel};a.metaPromptModified&&(t.context_prompt=a.metaPrompt,t.context_language=m.language,console.log("[Phase2] Passing edited context to backend (RAM-Proxy)"));const c=await s(t);if(_.value=2,await new Promise(w=>setTimeout(w,500)),!c.success)throw new Error(c.error||"Transformation failed");console.log("[Phase2] ‚úÖ Transformation complete!"),console.log("[Phase2] Stage 1:",c.stage1_output),console.log("[Phase2] Stage 2:",c.stage2_output),console.log("[Phase2] Total time:",c.execution_time_ms,"ms"),a.updateTransformedPrompt(c.transformed_prompt)}catch(s){b.value=s instanceof Error?s.message:"Transformation failed",console.error("[Phase2] Transformation error:",s)}finally{i.value=!1,_.value=0}}}function be(){a.clearTransformedPrompt(),console.log("[Phase2] Cleared transformed prompt for re-transformation")}function O(s){I.value=s,console.log("[Phase2] Selected media config:",s)}async function $e(s){if(console.log("[Phase2] handleMediaGeneration called:",{outputConfig:s,hasTransformedPrompt:!!$.value,hasSelectedConfig:!!a.selectedConfig,transformedPromptLength:$.value?.length}),!$.value||!s||!a.selectedConfig){console.warn("[Phase2] ‚ùå Generation blocked - missing requirements:",{transformedPrompt:!!$.value,outputConfig:!!s,selectedConfig:!!a.selectedConfig});return}console.log("[Phase2] ‚úÖ Starting media generation:",{outputConfig:s,transformedPrompt:$.value.substring(0,100)+"..."}),W.value=!0,B.value=0,L.value=null,b.value=null;const t={text:$.value,configId:a.selectedConfig.id};let c,w=!1;K.value&&K.value.text===t.text&&K.value.configId===t.configId?(c=Math.floor(Math.random()*(2**31-1)),w=!0,console.log("[Phase2] Same state ‚Üí new seed for variation + stage4_only:",c)):(c=ee.value,w=!1,console.log("[Phase2] State changed ‚Üí reusing seed for comparison + run full pipeline:",c)),ge.value=c;const A=3e4,H=300,q=90/A*H,Y=setInterval(()=>{B.value<90&&(B.value=Math.min(90,B.value+q))},H);try{const F=await oe({schema:a.selectedConfig.id,input_text:$.value,user_input:o.value,user_language:m.language,execution_mode:a.executionMode,safety_level:a.safetyLevel,output_config:s,stage4_only:w,seed:c});if(clearInterval(Y),F.status!=="success")throw new Error(F.error||"Pipeline execution failed");const V=F.media_output?.run_id;if(!V)throw new Error("No run_id returned from API");pe.value=V,console.log("[Phase2] Generation complete, run_id:",V),B.value=100,L.value=`/api/media/image/${V}`,K.value=t;const N=F.media_output?.metadata?.seed;N?(ee.value=N,console.log("[Phase2] Seed from response:",N)):(ee.value=c,console.log("[Phase2] Using local seed:",c)),W.value=!1}catch(F){clearInterval(Y),console.error("[Phase2] Media generation error:",F),b.value=F instanceof Error?F.message:"Media generation failed",W.value=!1}}function ce(){W.value=!1,L.value=null,B.value=0}function ye(){a.updateUserInput(o.value),$.value&&a.clearTransformedPrompt()}function we(){a.updateMetaPrompt(y.value),console.log("[Phase2] Meta-prompt edited:",y.value.substring(0,50)+"...")}function Pe(s){const t=s.target;a.updateTransformedPrompt(t.value)}function ke(){console.log("[Phase2] Transformed prompt editing complete")}function Ie(s){o.value=s,a.updateUserInput(s),a.clearTransformedPrompt()}function Ce(){P.push({name:"property-selection"})}function Se(s){console.log("[Phase2] Vector Fusion generated:",s)}return J(()=>T.params.configId,(s,t)=>{console.log("========================================"),console.log("[Phase2 WATCH] route.params.configId changed!"),console.log("[Phase2 WATCH] Old configId:",t),console.log("[Phase2 WATCH] New configId:",s),console.log("[Phase2 WATCH] Current editableMetaPrompt:",y.value?.substring(0,50)),console.log("[Phase2 WATCH] Current store.metaPrompt:",a.metaPrompt?.substring(0,50)),console.log("========================================")}),J(()=>m.language,async s=>{console.log("[Phase2 WATCH] Language changed to:",s),await a.loadMetaPromptForLanguage(s),y.value=a.metaPrompt||""}),J(()=>a.metaPrompt,(s,t)=>{console.log("[Phase2 WATCH] pipelineStore.metaPrompt changed!"),console.log("[Phase2 WATCH] Old:",t?.substring(0,50)),console.log("[Phase2 WATCH] New:",s?.substring(0,50)),console.log("[Phase2 WATCH] editableMetaPrompt before sync:",y.value?.substring(0,50)),y.value!==s?(y.value=s,console.log("[Phase2 WATCH] ‚Üí editableMetaPrompt updated")):console.log("[Phase2 WATCH] ‚Üí editableMetaPrompt NOT updated (values equal)")}),(s,t)=>(l(),r(X,null,[e("div",Pt,[e("div",kt,[e("div",It,[e("button",{class:"back-btn",onClick:Ce}," ‚Üê "+n(s.$t("common.back")||"Zur√ºck"),1),e("div",Ct,[e("div",St,n(fe.value),1)])])]),p.value?(l(),r("div",xt,[t[9]||(t[9]=e("div",{class:"loading-spinner"},"‚öôÔ∏è",-1)),e("div",Tt,n(s.$t("common.loading")||"L√§dt..."),1)])):d.value==="text_semantic_split"?(l(),Be(dt,{key:1,"config-id":j(T).params.configId,"execution-mode":j(a).executionMode,"safety-level":j(a).safetyLevel,onGenerated:Se},null,8,["config-id","execution-mode","safety-level"])):(l(),r("div",Mt,[e("div",{class:"particles",ref_key:"particlesRef",ref:f},null,512),(l(),r("svg",{class:"connections",ref_key:"connectionsRef",ref:R},[e("path",{class:"connection-line connection-input-result",ref_key:"line1Ref",ref:S},null,512),e("path",{class:"connection-line connection-meta-result",ref_key:"line2Ref",ref:M},null,512)],512)),e("div",Ft,[e("div",At,[e("div",{class:"card card-input",ref_key:"inputNodeRef",ref:v},[e("div",Rt,[t[10]||(t[10]=e("div",{class:"card-icon"},"üí°",-1)),e("div",Et,n(s.$t("phase2.yourIdea")||"Deine Idee: Um WAS soll es hier gehen?"),1)]),te(e("textarea",{class:"card-input-area","onUpdate:modelValue":t[0]||(t[0]=c=>o.value=c),onInput:ye,placeholder:s.$t("phase2.writeYourText")||"Schreibe deinen Text...",maxlength:"500",ref_key:"inputTextareaRef",ref:U},null,40,Bt),[[se,o.value]]),e("div",Lt,[e("span",Vt,n(o.value.length)+" / 500",1)])],512),e("div",{class:"card card-rules",ref_key:"metaNodeRef",ref:h},[e("div",Dt,[t[11]||(t[11]=e("div",{class:"card-icon"},"üìã",-1)),e("div",Gt,n(s.$t("phase2.rules")||"Deine Regeln: WIE soll Deine Idee umgesetzt werden?"),1)]),e("div",Nt,[j(a).metaPrompt!==null?te((l(),r("textarea",{key:0,class:"rules-textarea","onUpdate:modelValue":t[1]||(t[1]=c=>y.value=c),onInput:we,placeholder:me.value==="en"?`Edit the transformation rules here. You can modify how the AI transforms your input.

Example:
- Use the style of...
- Transform it by...
- Add elements of...`:`Bearbeite hier die Transformationsregeln. Du kannst √§ndern, wie die KI deine Eingabe umwandelt.

Beispiel:
- Nutze den Stil von...
- Verwandle es durch...
- F√ºge Elemente von... hinzu`},null,40,zt)),[[se,y.value]]):(l(),r("div",Ut,n(s.$t("common.loading")||"L√§dt..."),1))])],512)])]),i.value?(l(),r("div",Wt,[t[12]||(t[12]=e("div",{class:"llm-icon rotating"},"‚öôÔ∏è",-1)),e("div",Ht,[_.value===1?(l(),r("div",Kt,n(s.$t("phase2.stage1")||"Stage 1: √úbersetzung + Sicherheit..."),1)):_.value===2?(l(),r("div",Ot,n(s.$t("phase2.stage2")||"Stage 2: Transformation..."),1)):(l(),r("div",qt,n(s.$t("phase2.transforming")||"Transformiere..."),1))])])):k("",!0),e("div",{class:C(["result-panel",{"is-empty":!$.value,"is-filled":$.value}]),ref_key:"resultNodeRef",ref:E},[e("div",Yt,[t[13]||(t[13]=e("div",{class:"result-icon"},"‚ú®",-1)),e("div",jt,n(s.$t("phase2.transformedPrompt")||"Transformierter Prompt"),1),$.value?(l(),r("div",Qt,n($.value.length),1)):k("",!0)]),$.value?(l(),r("textarea",{key:0,class:"result-textarea",value:$.value,onInput:Pe,onBlur:ke,ref_key:"transformedTextareaRef",ref:g},null,40,Jt)):(l(),r("div",Zt,[e("button",{class:"transform-btn-center",disabled:!re.value||i.value,onClick:_e},[i.value?(l(),r("span",ts," ‚öôÔ∏è "+n(s.$t("phase2.aiWorking")||"KI arbeitet..."),1)):(l(),r("span",es," ‚ú® "+n(s.$t("phase2.startAI")||"Los, KI, bearbeite meine Eingabe!"),1))],8,Xt),i.value?k("",!0):(l(),r("div",ss,n(s.$t("phase2.stage12Time")||"~5-10 Sekunden"),1))]))],2),le.value.length>0?(l(),r("div",as,[e("div",os,n(s.$t("phase2.examples")||"Beispiele:"),1),(l(!0),r(X,null,ae(le.value,(c,w)=>(l(),r("div",{key:w,class:"example-item",onClick:A=>Ie(c)},n(c),9,ns))),128))])):k("",!0),$.value?(l(),r("div",is,[e("button",{class:"secondary-btn retransform-btn",disabled:i.value,onClick:be}," üîÑ "+n(s.$t("phase2.reTransform")||"Noch mal anders"),9,ls)])):k("",!0),$.value?(l(),r("div",rs,[e("div",ds,n(s.$t("phase2.selectMedia")||"W√§hle dein Medium:"),1),e("div",cs,[e("div",{class:C(["media-card",{active:I.value==="sd35_large"}]),onClick:t[2]||(t[2]=c=>O("sd35_large")),title:"Stable Diffusion 3.5"},[t[14]||(t[14]=e("div",{class:"media-icon"},"üé®",-1)),t[15]||(t[15]=e("div",{class:"media-name"},"SD 3.5",-1)),e("div",us,n(s.$t("phase2.mediaImage")||"Bild"),1)],2),e("div",{class:C(["media-card",{active:I.value==="gpt_image_1"}]),onClick:t[3]||(t[3]=c=>O("gpt_image_1")),title:"GPT Image Generation"},[t[16]||(t[16]=e("div",{class:"media-icon"},"ü§ñ",-1)),t[17]||(t[17]=e("div",{class:"media-name"},"GPT Image",-1)),e("div",vs,n(s.$t("phase2.mediaImage")||"Bild"),1)],2),e("div",{class:C(["media-card",{active:I.value==="stableaudio"}]),onClick:t[4]||(t[4]=c=>O("stableaudio")),title:"Stable Audio"},[t[18]||(t[18]=e("div",{class:"media-icon"},"üéµ",-1)),t[19]||(t[19]=e("div",{class:"media-name"},"Stable Audio",-1)),e("div",ps,n(s.$t("phase2.mediaAudio")||"Sound"),1)],2),e("div",{class:C(["media-card",{active:I.value==="acestep_instrumental"}]),onClick:t[5]||(t[5]=c=>O("acestep_instrumental")),title:"Ace Step Music"},[t[20]||(t[20]=e("div",{class:"media-icon"},"üé∂",-1)),t[21]||(t[21]=e("div",{class:"media-name"},"Ace Step",-1)),e("div",gs,n(s.$t("phase2.mediaAudio")||"Sound"),1)],2),e("div",ms,[t[22]||(t[22]=e("div",{class:"media-icon"},"üìπ",-1)),t[23]||(t[23]=e("div",{class:"media-name"},"Video",-1)),e("div",fs,n(s.$t("phase2.comingSoon")||"Bald"),1)]),e("div",hs,[t[24]||(t[24]=e("div",{class:"media-icon"},"üßä",-1)),t[25]||(t[25]=e("div",{class:"media-name"},"3D",-1)),e("div",_s,n(s.$t("phase2.comingSoon")||"Bald"),1)])]),e("button",{class:"generate-media-btn",disabled:!I.value,onClick:t[6]||(t[6]=c=>$e(I.value))}," ‚ú® "+n(s.$t("phase2.generateMedia")||"Medium generieren"),9,bs)])):k("",!0)]))]),W.value||L.value?(l(),r("div",{key:0,class:"generation-overlay",onClick:Le(ce,["self"])},[e("div",$s,[L.value?(l(),r("button",{key:0,class:"close-btn",onClick:ce},"‚úï")):k("",!0),L.value?(l(),r("div",ys,[e("img",{src:L.value,class:"preview-image",style:Z({opacity:Math.max(.2,B.value/100)}),alt:"Generated image"},null,12,ws)])):(l(),r("div",Ps,[Ve(wt,{progress:B.value},null,8,["progress"]),e("p",ks,n(s.$t("phase3.generating")||"Bild wird generiert..."),1),e("p",Is,n(s.$t("phase3.generatingHint")||"~30 Sekunden"),1)]))])])):k("",!0),b.value?(l(),r("div",{key:1,class:"error-toast",onClick:t[8]||(t[8]=c=>b.value=null)},[t[26]||(t[26]=e("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),e("div",Cs,[e("div",Ss,n(s.$t("common.error")||"Fehler"),1),e("div",xs,n(b.value),1)]),e("button",{class:"error-close",onClick:t[7]||(t[7]=c=>b.value=null)},"‚úï")])):k("",!0)],64))}}),As=ie(Ts,[["__scopeId","data-v-3028ba8e"]]);export{As as default};
