import{d as ee,r as C,b as L,e as A,c as M,o as y,n as q,f as O,g as Y,a as f,t as _,_ as I,w as j,h as z,i as te,F as B,j as N,k as V,l as J,u as ne,m as $,p as oe,q as se}from"./index-qtI_J46Q.js";import{u as ae}from"./pipelineExecution-BKUFF4Bc.js";const Z=ee("configSelection",()=>{const n=C(new Set),i=C([]),t=C([]),w=C(!1),h=C(new Map),c=C("de"),p=C(!1),g=C(null),l=L(()=>{const e=new Map;return t.value.forEach(([o,P])=>{e.set(o,P),e.set(P,o)}),e}),a=L(()=>n.value.size===0?i.value:i.value.filter(e=>Array.from(n.value).every(o=>e.properties.includes(o)))),u=L(()=>a.value.length),x=L(()=>n.value.size>0&&u.value===0),b=L(()=>x.value?i.value.map(o=>{const P=Array.from(n.value).filter(E=>o.properties.includes(E));return{config:o,matchingProps:P,matchScore:P.length}}).filter(o=>o.matchScore>0).sort((o,P)=>P.matchScore-o.matchScore).slice(0,5):[]);async function k(){p.value=!0,g.value=null;try{const e=await fetch("/pipeline_configs_with_properties");if(!e.ok)throw new Error(`API error: ${e.status} ${e.statusText}`);const o=await e.json();if(i.value=o.configs,w.value=o.symbols_enabled||!1,w.value&&o.property_pairs.length>0){const P=o.property_pairs;t.value=P.map(S=>S.pair);const E=new Map;P.forEach(S=>{const[D,H]=S.pair,X=c.value;E.set(D,{symbol:S.symbols[D]||"",label:S.labels[X]?.[D]||D,tooltip:S.tooltips[X]?.[D]||""}),E.set(H,{symbol:S.symbols[H]||"",label:S.labels[X]?.[H]||H,tooltip:S.tooltips[X]?.[H]||""})}),h.value=E,console.log(`[ConfigSelection] Loaded ${o.configs.length} configs, ${P.length} property pairs (with symbols)`)}else t.value=o.property_pairs,h.value.clear(),console.log(`[ConfigSelection] Loaded ${o.configs.length} configs, ${o.property_pairs.length} property pairs`)}catch(e){g.value=e instanceof Error?e.message:"Unknown error loading configs",console.error("[ConfigSelection] Error loading configs:",e)}finally{p.value=!1}}function W(e){const o=l.value.get(e);n.value.has(e)?n.value.delete(e):(n.value.add(e),o&&n.value.has(o)&&n.value.delete(o)),n.value=new Set(n.value)}function T(e){return n.value.has(e)}function v(e){return l.value.get(e)}function r(){n.value.clear(),n.value=new Set}function s(e){n.value=new Set(e)}function m(e){return h.value.get(e)}function d(e){c.value=e,w.value&&k()}return{selectedProperties:L(()=>Array.from(n.value)),availableConfigs:L(()=>i.value),propertyPairs:L(()=>t.value),isLoading:L(()=>p.value),error:L(()=>g.value),symbolsEnabled:L(()=>w.value),currentLanguage:L(()=>c.value),filteredConfigs:a,matchCount:u,hasNoMatch:x,partialMatches:b,loadConfigs:k,toggleProperty:W,isPropertySelected:T,getOppositeProperty:v,clearAllProperties:r,setProperties:s,getSymbolData:m,setLanguage:d}}),re=["title","data-property"],ie={key:0,class:"property-symbol"},ce={class:"property-label"},le=A({__name:"PropertyBubble",props:{property:{},color:{},isSelected:{type:Boolean},x:{},y:{},symbolData:{}},emits:["toggle","updatePosition"],setup(n,{emit:i}){const t=n,w=i,h=C(null),c=C(!1),p=C(!1),g=C({x:0,y:0}),l=C({x:0,y:0}),a=L(()=>t.symbolData?.symbol||""),u=L(()=>t.symbolData?.label||t.property),x=L(()=>t.symbolData?.tooltip||""),b=L(()=>({left:`${t.x}px`,top:`${t.y}px`,"--bubble-color":t.color,"--bubble-shadow":t.isSelected?`0 0 20px ${t.color}`:"none",cursor:c.value?"grabbing":"grab"}));function k(d){!c.value&&!p.value&&w("toggle",t.property)}function W(d){d.preventDefault(),c.value=!0,p.value=!1;const e=h.value?.getBoundingClientRect();e&&(g.value={x:d.clientX-e.left-e.width/2,y:d.clientY-e.top-e.height/2}),document.addEventListener("mousemove",T),document.addEventListener("mouseup",v)}function T(d){if(!c.value)return;p.value=!0;const e=d.clientX-g.value.x,o=d.clientY-g.value.y;w("updatePosition",t.property,e,o)}function v(){c.value=!1,document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",v),setTimeout(()=>{p.value=!1},100)}function r(d){d.preventDefault(),c.value=!0,p.value=!1;const e=d.touches[0];if(!e)return;l.value={x:e.clientX,y:e.clientY};const o=h.value?.getBoundingClientRect();o&&(g.value={x:e.clientX-o.left-o.width/2,y:e.clientY-o.top-o.height/2}),document.addEventListener("touchmove",s,{passive:!1}),document.addEventListener("touchend",m)}function s(d){if(!c.value)return;d.preventDefault(),p.value=!0;const e=d.touches[0];if(!e)return;const o=e.clientX-g.value.x,P=e.clientY-g.value.y;w("updatePosition",t.property,o,P)}function m(d){if(c.value=!1,document.removeEventListener("touchmove",s),document.removeEventListener("touchend",m),!p.value){const e=d.changedTouches[0];if(e){const o=Math.abs(e.clientX-l.value.x),P=Math.abs(e.clientY-l.value.y),E=10;o<E&&P<E&&w("toggle",t.property)}}setTimeout(()=>{p.value=!1},100)}return(d,e)=>(y(),M("div",{ref_key:"bubbleEl",ref:h,class:O(["property-bubble",{selected:n.isSelected,dragging:c.value}]),style:q(b.value),title:x.value,onClick:k,onMousedown:W,onTouchstart:r,"data-property":n.property},[a.value?(y(),M("span",ie,_(a.value),1)):Y("",!0),f("span",ce,_(u.value),1)],46,re))}}),ue=I(le,[["__scopeId","data-v-ace06fe2"]]),de={class:"property-canvas"},ve=["viewBox"],ge=["x1","y1","x2","y2","stroke"],fe=A({__name:"PropertyCanvas",props:{propertyPairs:{},selectedProperties:{},canvasWidth:{},canvasHeight:{}},emits:["toggleProperty"],setup(n,{emit:i}){const t=n,w=i,h=Z(),c=["#9b87f5","#60a5fa","#fb923c","#4ade80","#fbbf24"],p=L(()=>{const v={};return t.propertyPairs.forEach((r,s)=>{const m=c[s]||"#888";v[r[0]]=m,v[r[1]]=m}),v}),g=L(()=>t.propertyPairs.flat()),l=C({});function a(){const v={},r=[],s=t.canvasWidth/2,m=t.canvasHeight/2,d=Math.min(t.canvasWidth,t.canvasHeight)*.3,e=120;function o(E,S){if(Math.sqrt(Math.pow(E-s,2)+Math.pow(S-m,2))>d)return!1;for(const H of r)if(Math.sqrt(Math.pow(E-H.x,2)+Math.pow(S-H.y,2))<e)return!1;return!0}function P(E=100){for(let H=0;H<E;H++){const X=Math.random()*Math.PI*2,R=Math.random()*d,G=s+Math.cos(X)*R,K=m+Math.sin(X)*R;if(o(G,K))return{x:G,y:K}}const S=Math.random()*Math.PI*2,D=Math.random()*d;return{x:s+Math.cos(S)*D,y:m+Math.sin(S)*D}}t.propertyPairs.forEach(E=>{const S=P();v[E[0]]=S,r.push(S);const D=P();v[E[1]]=D,r.push(D)}),l.value=v}function u(v){return l.value[v]||{x:0,y:0}}function x(v){return p.value[v]||"#888"}function b(v){return t.selectedProperties.includes(v)}function k(v){w("toggleProperty",v)}function W(v){return h.getSymbolData(v)}function T(v,r,s){const m=t.canvasWidth/2,d=t.canvasHeight/2,e=Math.min(t.canvasWidth,t.canvasHeight)*.3;if(Math.sqrt(Math.pow(r-m,2)+Math.pow(s-d,2))>e){const P=Math.atan2(s-d,r-m);r=m+Math.cos(P)*e,s=d+Math.sin(P)*e}l.value[v]={x:r,y:s}}return j([()=>t.canvasWidth,()=>t.canvasHeight],()=>{a()}),z(()=>{a()}),(v,r)=>(y(),M("div",de,[(y(),M("svg",{class:"rubber-bands-layer",viewBox:`0 0 ${n.canvasWidth} ${n.canvasHeight}`},[r[0]||(r[0]=te('<defs data-v-4127952e><linearGradient id="flow-gradient" x1="0%" y1="0%" x2="100%" y2="0%" data-v-4127952e><stop offset="0%" stop-color="transparent" data-v-4127952e></stop><stop offset="50%" stop-color="currentColor" stop-opacity="0.3" data-v-4127952e></stop><stop offset="100%" stop-color="transparent" data-v-4127952e></stop><animate attributeName="x1" values="0%;100%;0%" dur="3s" repeatCount="indefinite" data-v-4127952e></animate><animate attributeName="x2" values="100%;200%;100%" dur="3s" repeatCount="indefinite" data-v-4127952e></animate></linearGradient></defs>',1)),(y(!0),M(B,null,N(n.propertyPairs,(s,m)=>(y(),M("g",{key:`pair-${m}`},[f("line",{x1:u(s[0]).x,y1:u(s[0]).y,x2:u(s[1]).x,y2:u(s[1]).y,stroke:c[m],"stroke-width":"2","stroke-opacity":"0.4",class:"rubber-band"},null,8,ge)]))),128))],8,ve)),(y(!0),M(B,null,N(g.value,(s,m)=>(y(),V(ue,{key:s,property:s,color:x(s),"is-selected":b(s),x:l.value[s]?.x||0,y:l.value[s]?.y||0,"symbol-data":W(s),onToggle:k,onUpdatePosition:T},null,8,["property","color","is-selected","x","y","symbol-data"]))),128))]))}}),he=I(fe,[["__scopeId","data-v-4127952e"]]),pe=["data-config-id"],me={class:"tile-header"},ye={class:"tile-name"},be={class:"tile-body"},Pe={class:"tile-description"},Ce=A({__name:"ConfigTile",props:{config:{},x:{},y:{},isDimmed:{type:Boolean,default:!1},selectedProperties:{},currentLanguage:{}},emits:["select"],setup(n,{emit:i}){const t=n,w=i,h=C(!1),c=C(0),p=C(0),g=C(t.x),l=C(t.y),a=C(!1),u=L(()=>({left:`${g.value}px`,top:`${l.value}px`}));function x(r){r.preventDefault(),h.value=!0,a.value=!1,c.value=r.clientX-g.value,p.value=r.clientY-l.value,document.addEventListener("mousemove",b),document.addEventListener("mouseup",k)}function b(r){h.value&&(a.value=!0,g.value=r.clientX-c.value,l.value=r.clientY-p.value)}function k(r){h.value&&(h.value=!1,document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",k),a.value||w("select",t.config.id))}function W(r){r.preventDefault();const s=r.touches[0];s&&(h.value=!0,a.value=!1,c.value=s.clientX-g.value,p.value=s.clientY-l.value,document.addEventListener("touchmove",T,{passive:!1}),document.addEventListener("touchend",v))}function T(r){if(!h.value)return;r.preventDefault();const s=r.touches[0];s&&(a.value=!0,g.value=s.clientX-c.value,l.value=s.clientY-p.value)}function v(r){h.value&&(h.value=!1,document.removeEventListener("touchmove",T),document.removeEventListener("touchend",v),a.value||w("select",t.config.id))}return J(()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",k),document.removeEventListener("touchmove",T),document.removeEventListener("touchend",v)}),z(()=>{g.value=t.x,l.value=t.y}),(r,s)=>(y(),M("div",{class:O(["config-tile",{dimmed:n.isDimmed,dragging:h.value}]),style:q(u.value),onMousedown:x,onTouchstart:W,"data-config-id":n.config.id},[f("div",me,[f("h3",ye,_(n.config.name[n.currentLanguage]),1)]),f("div",be,[f("p",Pe,_(n.config.short_description[n.currentLanguage]),1)])],46,pe))}}),_e=I(Ce,[["__scopeId","data-v-12876674"]]),Me={class:"config-canvas"},we={key:0,class:"match-counter"},F=260,U=120,Q=50,xe=A({__name:"ConfigCanvas",props:{configs:{},selectedProperties:{},matchCount:{},canvasWidth:{},canvasHeight:{},isDimmed:{type:Boolean,default:!1},currentLanguage:{}},emits:["selectConfig"],setup(n,{emit:i}){const t=n,w=i,h=C([]);function c(){const l=[...t.configs];if(l.length===0){h.value=[];return}const a=F+Q,u=U+Q,x=Math.floor(t.canvasWidth/a),b=Math.floor(t.canvasHeight/u);if(x===0||b===0){console.warn("[ConfigCanvas] Canvas too small for tiles"),h.value=[];return}const k=t.canvasWidth*.55,W=t.canvasHeight*.6;function T(m,d){return m<k&&d<W}const v=[];for(let m=0;m<b;m++)for(let d=0;d<x;d++){const e=d*a+a/2,o=m*u+u/2;T(e,o)||v.push({x:e,y:o})}const r=p(v),s=[];l.forEach((m,d)=>{if(d>=r.length){console.warn(`[ConfigCanvas] Not enough grid cells for ${l.length} configs`);return}const e=r[d];if(!e)return;const o=(Math.random()-.5)*a*.3,P=(Math.random()-.5)*u*.3;s.push({...m,position:{x:Math.max(F/2,Math.min(t.canvasWidth-F/2,e.x+o)),y:Math.max(U/2,Math.min(t.canvasHeight-U/2,e.y+P))}})}),h.value=s}function p(l){const a=[...l];for(let u=a.length-1;u>0;u--){const x=Math.floor(Math.random()*(u+1)),b=a[u];a[u]=a[x],a[x]=b}return a}function g(l){w("selectConfig",l)}return j(()=>t.configs,()=>{c()},{deep:!0}),j([()=>t.canvasWidth,()=>t.canvasHeight],()=>{c()}),z(()=>{c()}),(l,a)=>(y(),M("div",Me,[(y(!0),M(B,null,N(h.value,u=>(y(),V(_e,{key:u.id,config:u,x:u.position.x,y:u.position.y,"is-dimmed":n.isDimmed,"selected-properties":n.selectedProperties,"current-language":n.currentLanguage,onSelect:g},null,8,["config","x","y","is-dimmed","selected-properties","current-language"]))),128)),n.isDimmed?Y("",!0):(y(),M("div",we,_(n.matchCount)+" "+_(n.matchCount===1?"config":"configs"),1))]))}}),Le=I(xe,[["__scopeId","data-v-9cb4d2d4"]]),Se={class:"no-match-state"},$e={class:"no-match-content"},Ee={class:"no-match-title"},ke={class:"no-match-message"},Te={key:0,class:"suggestions"},De={class:"suggestions-title"},He={class:"suggestions-subtitle"},We={class:"suggestions-list"},Xe=["onClick"],Ye={class:"suggestion-header"},Ae={class:"suggestion-name"},Ie={class:"suggestion-score"},Be={class:"suggestion-description"},Ne={class:"suggestion-properties"},Ve={class:"no-match-actions"},ze=A({__name:"NoMatchState",props:{partialMatches:{},selectedPropertiesCount:{},currentLanguage:{}},emits:["clearSelection","selectConfig"],setup(n,{emit:i}){const t=i,w={chill:"#9b87f5",chaotic:"#9b87f5",narrative:"#60a5fa",algorithmic:"#60a5fa",facts:"#f87171",emotion:"#f87171",historical:"#fb923c",contemporary:"#fb923c",explore:"#4ade80",create:"#4ade80",playful:"#fbbf24",serious:"#fbbf24"};function h(g){return w[g]||"#888"}function c(){t("clearSelection")}function p(g){t("selectConfig",g)}return(g,l)=>(y(),M("div",Se,[f("div",$e,[l[0]||(l[0]=f("div",{class:"no-match-icon"},"üòø",-1)),f("h2",Ee,_(n.currentLanguage==="en"?"sorry, no matches":"sorry, keine Treffer"),1),f("p",ke,_(n.currentLanguage==="en"?"Try a different combination?":"Andere Kombination probieren?"),1),n.partialMatches.length>0?(y(),M("div",Te,[f("h3",De,_(n.currentLanguage==="en"?"Partial matches":"Teilweise √úbereinstimmungen"),1),f("p",He,_(n.currentLanguage==="en"?"These configs match some of your selected properties:":"Diese Konfigurationen entsprechen einigen Ihrer ausgew√§hlten Eigenschaften:"),1),f("div",We,[(y(!0),M(B,null,N(n.partialMatches,a=>(y(),M("div",{key:a.config.id,class:"suggestion-item",onClick:u=>p(a.config.id)},[f("div",Ye,[f("h4",Ae,_(a.config.name[n.currentLanguage]),1),f("span",Ie,_(a.matchScore)+"/"+_(n.selectedPropertiesCount),1)]),f("p",Be,_(a.config.short_description[n.currentLanguage]),1),f("div",Ne,[(y(!0),M(B,null,N(a.matchingProps,u=>(y(),M("span",{key:u,class:"matching-property",style:q({"--tag-color":h(u)})},_(g.$t("properties."+u)),5))),128))])],8,Xe))),128))])])):Y("",!0),f("div",Ve,[f("button",{class:"action-button reset",onClick:c},_(n.currentLanguage==="en"?"reset":"zur√ºcksetzen"),1)])])]))}}),Fe=I(ze,[["__scopeId","data-v-c87ac8b0"]]),Ue={class:"property-quadrants-view"},je={key:0,class:"loading-state"},qe={key:1,class:"error-state"},Re={key:2,class:"main-canvas"},Ge={class:"header-controls"},Ke={class:"page-title"},Qe={class:"controls"},Oe=A({__name:"PropertyQuadrantsView",setup(n){const i=Z(),t=ne(),w=ae(),h=se(),c=L(()=>t.language),p=C(0),g=C(0);function l(){p.value=window.innerWidth,g.value=window.innerHeight}function a(x){i.toggleProperty(x)}function u(x){console.log("[PropertyQuadrants] Config selected:",x),console.log("[PropertyQuadrants] Clearing pipeline store for fresh start..."),w.clearAll(),h.push({name:"pipeline-execution",params:{configId:x}})}return z(()=>{i.clearAllProperties(),i.loadConfigs(),l(),window.addEventListener("resize",l)}),J(()=>{window.removeEventListener("resize",l)}),(x,b)=>(y(),M("div",Ue,[$(i).isLoading?(y(),M("div",je,[b[3]||(b[3]=f("div",{class:"loading-spinner"},null,-1)),f("p",null,_(c.value==="en"?"Loading configs...":"Lade Konfigurationen..."),1)])):$(i).error?(y(),M("div",qe,[b[4]||(b[4]=f("div",{class:"error-icon"},"‚ùå",-1)),f("h2",null,_(c.value==="en"?"Error loading configs":"Fehler beim Laden"),1),f("p",null,_($(i).error),1),f("button",{class:"retry-button",onClick:b[0]||(b[0]=k=>$(i).loadConfigs())},_(c.value==="en"?"Retry":"Erneut versuchen"),1)])):(y(),M("div",Re,[oe(he,{"property-pairs":$(i).propertyPairs,"selected-properties":$(i).selectedProperties,"canvas-width":p.value,"canvas-height":g.value,"current-language":c.value,onToggleProperty:a},null,8,["property-pairs","selected-properties","canvas-width","canvas-height","current-language"]),$(i).selectedProperties.length>0?(y(),V(Le,{key:0,configs:$(i).filteredConfigs,"selected-properties":$(i).selectedProperties,"match-count":$(i).matchCount,"canvas-width":p.value,"canvas-height":g.value,"is-dimmed":$(i).hasNoMatch,"current-language":c.value,onSelectConfig:u},null,8,["configs","selected-properties","match-count","canvas-width","canvas-height","is-dimmed","current-language"])):Y("",!0),$(i).hasNoMatch?(y(),V(Fe,{key:1,"partial-matches":$(i).partialMatches,"selected-properties-count":$(i).selectedProperties.length,"current-language":c.value,onClearSelection:b[1]||(b[1]=k=>$(i).clearAllProperties()),onSelectConfig:u},null,8,["partial-matches","selected-properties-count","current-language"])):Y("",!0),f("div",Ge,[f("h1",Ke,_(c.value==="en"?"Select Configuration":"Konfiguration ausw√§hlen"),1),f("div",Qe,[$(i).selectedProperties.length>0?(y(),M("button",{key:0,class:"clear-button",onClick:b[2]||(b[2]=k=>$(i).clearAllProperties())},_(c.value==="en"?"Clear selection":"Auswahl l√∂schen"),1)):Y("",!0)])])]))]))}}),et=I(Oe,[["__scopeId","data-v-86f054b7"]]);export{et as default};
