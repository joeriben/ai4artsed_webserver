Challenging Kahn's Algorithm:

Workflow 2: Multi-Criteria Evaluation Pipeline                                                                                  
                                                                                                                                 
 Input                                                                                                                           
   ↓                                                                                                                             
 Interception                                                                                                                    
   ↓                                                                                                                             
 Generation                                                                                                                      
   ↓                                                                                                                             
 Fairness Evaluation → Display ("Fairness Score: 8/10")                                                                          
   ↓                                                                                                                             
 Creativity Evaluation → Display ("Originality: 6/10 - Stock photo-like")                                                        
   ↓                                                                                                                             
 Quality Evaluation → Display ("Technical Quality: 9/10")                                                                        
   ↓                                                                                                                             
 Threshold Fork (Overall score >= 7?)                                                                                            
   ├─ True → Collector                                                                                                           
   └─ False → Loop Controller → Back to Interception                                                                             
                                                                                                                                 
 Behavior:                                                                                                                       
 - Chain multiple evaluations                                                                                                    
 - Display each result on canvas (transparency)                                                                                  
 - Overall decision based on combined criteria                                                                                   
 - Feedback loop if any criterion fails                                                                                          
                                                                                                                                 
 ---                                                                                                                             
 Technical Challenges & Solutions                                                                                                
                                                                                                                                 
 Challenge 1: Topological Sort with Loops                                                                                        
                                                                                                                                 
 Problem: Current execution uses Kahn's algorithm which rejects cycles.                                                          
                                                                                                                                 
 Solution:                                                                                                                       
 - Keep topological sort for initial execution order                                                                             
 - Loop Controller adds nodes back to execution queue                                                                            
 - Track visited nodes per iteration (avoid infinite loops within one iteration)                                                 
 - Use max iteration counter as hard limit                                                                                       
                                                                                                                                 
 Challenge 2: Conditional Execution (Inactive Branches)                                                                          
                                                                                                                                 
 Problem: Current system executes all nodes with satisfied dependencies.                                                         
                                                                                                                                 
 Solution:                                                                                                                       
 - Track active paths: Set<(sourceId, targetId)>                                                                                 
 - Fork node marks one outgoing path as active                                                                                   
 - Before executing node: check if ALL incoming connections are active                                                           
 - Skip execution if any incoming path is inactive                                                                               
                                                                                                                                 
 Challenge 3: Multiple Output Connectors (UI)                                                                                    
                                                                                                                                 
 Problem: Current node design has 1 output connector.                                                                            
                                                                                                                                 
 Solution:                                                                                                                       
 - Fork nodes: Render multiple connectors with labels                                                                            
 - Connection creation: Include label parameter (which output was clicked)                                                       
 - Backend: Match connection labels to fork decision (true/false)                                                                
                                                                                                                                 
 Challenge 4: LLM Response Format for Evaluations                                                                                
                                                                                                                                 
 Problem: PromptInterceptionEngine returns output_str, output_float, output_binary, output_int.                                  
                                                                                                                                 
 Solution:                                                                                                                       
 - Evaluation prompt instructs LLM to return structured response                                                                 
 - Example prompt suffix: "Return your evaluation as: SCORE: [0-10], BINARY: [true/false], COMMENTARY: [explanation]"            
 - Parse response to extract fields                                                                                              
 - Store in evaluation result                                                                                                    
                                                                                                                                 
 Alternative: Use task_instruction parameter of PromptInterceptionEngine to enforce JSON output.                                 
                                                                                                  
