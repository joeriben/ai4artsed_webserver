{
  "3": {
    "inputs": {
      "seed": 692070239713369,
      "steps": 20,
      "cfg": 3.47,
      "sampler_name": "euler",
      "scheduler": "normal",
      "denoise": 1,
      "model": [
        "4",
        0
      ],
      "positive": [
        "36",
        0
      ],
      "negative": [
        "35",
        0
      ],
      "latent_image": [
        "5",
        0
      ]
    },
    "class_type": "KSampler",
    "_meta": {
      "title": "KSampler"
    }
  },
  "4": {
    "inputs": {
      "ckpt_name": "sd3.5_large.safetensors"
    },
    "class_type": "CheckpointLoaderSimple",
    "_meta": {
      "title": "Load Checkpoint"
    }
  },
  "5": {
    "inputs": {
      "width": 1024,
      "height": 1024,
      "batch_size": 1
    },
    "class_type": "EmptyLatentImage",
    "_meta": {
      "title": "Empty Latent Image"
    }
  },
  "6": {
    "inputs": {
      "text": [
        "16",
        0
      ],
      "clip": [
        "17",
        0
      ]
    },
    "class_type": "CLIPTextEncode",
    "_meta": {
      "title": "CLIP Text Encode POSITIVE (clip_l, clip_g)"
    }
  },
  "8": {
    "inputs": {
      "samples": [
        "3",
        0
      ],
      "vae": [
        "4",
        2
      ]
    },
    "class_type": "VAEDecode",
    "_meta": {
      "title": "VAE Decode"
    }
  },
  "9": {
    "inputs": {
      "filename_prefix": "ComfyUI",
      "images": [
        "8",
        0
      ]
    },
    "class_type": "SaveImage",
    "_meta": {
      "title": "Save Image"
    }
  },
  "13": {
    "inputs": {
      "input_context": "NULL=neutral",
      "style_prompt": "Translate the prompt into English with maximal semantic preservation. \nMaintain the original structure, and preserve all culturally specific terms or non-translatable phrases in their original form. \nDo not translate proper names, ritual terms, or material names unless they have a common English usage. \nMark such terms with double brackets, e.g. [[egungun]], and preserve their position. \nDo not paraphrase, interpret, or summarize. Do not add any comments or explanations.\nReturn only the translated prompt as plain text.",
      "api_key": [
        "14",
        0
      ],
      "model": "meta-llama/llama-3.3-70b-instruct",
      "debug": "enable",
      "input_prompt": [
        "43",
        0
      ]
    },
    "class_type": "ai4artsed_openrouter",
    "_meta": {
      "title": "AI4ArtsEd OpenRouter Promptinterception"
    }
  },
  "14": {
    "inputs": {},
    "class_type": "ai4artsed_openrouter_key",
    "_meta": {
      "title": "Secure Access to OpenRouter API Key"
    }
  },
  "16": {
    "inputs": {
      "input_context": "neutral",
      "style_prompt": "Your Task: CLIP Optimization for clip_l/g (Stable Diffusion 3.5)\n\nOUTPUT THE PURE PRESULTING PROMPT ONLY!\n\nYou will receive a user prompt for image generation. Restructure it ONLY by reordering, for CLIP models that strongly weight early tokens and truncate at 75 tokens.\n\nNEVER INCLUDE ANY META-INFORMATION SUCH AS THE NAMES OF THE DIMENSIONS BELOW OR THE TOKEN COUNT\n\nCLIP-Specific Rules\n\nAbsolute token limit: 75 (recommended ≤70)\n\nGeneral information:\nALWAYS EXTRAKT ONLY THE INFORMATION THAT IS VISUALLY RELEVANT. YOUR PROMPT WILL RESULT IN A COMMA_SEPARATED SERIES OF GROUOPED TOKENS; BARELY EVER CONNTECTED BY VERBS OR CONJUNCTIONS.\n\nBUT YOU WILL REORDER ALL THESE TOKENS ACCORDING TO THE FOLLOWING ORDER:\n\nEarly tokens = critical: The first 20–30 tokens largely determine the image\nMinimize Attributes: CLIP struggles with complex attributes – keep them short\nClear, direct terms: CLIP prefers concrete nouns and simple adjectives\nDo not alter the input text – no substitutions, paraphrasing, or lexical replacements allowed\n\n\nYOUR OUTPUT:\nCore Motif (15–20 tokens, 25–30%):\nPlace the main subject FIRST\nUse the exact wording provided in the original prompt\nEMPTY LINE\nAction (10–15 tokens, 15–20%):\nFollows the subject directly for strong subject-action linkage\nPrefer simple verb phrases; maintain exact original wording\nEMPTY LINE\nStyle/Medium (10–15 tokens, 15–20%):\nPlace early in the prompt for maximum impact on CLIP\nTypical examples: “oil painting”, “photography”, “3D render”\nUse only if present in the original prompt\nEMPTY LINE\nContext (10–15 tokens, 15–20%):\nLocation or setting, compressed\nReorder only; do not paraphrase\nEMPTY LINE\nAttributes (5–10 tokens, 10–15%):\nMinimize; include only if essential\nNo changes to wording – do not replace or reformulate\nEMPTY LINETechnical Aspects (0–5 tokens, 0–7%):\nInclude only if tokens remain and if originally present",
      "api_key": [
        "14",
        0
      ],
      "model": "deepseek/deepseek-r1",
      "debug": "enable",
      "input_prompt": [
        "13",
        0
      ]
    },
    "class_type": "ai4artsed_openrouter",
    "_meta": {
      "title": "Prompt optimization clip_l & clip_g"
    }
  },
  "17": {
    "inputs": {
      "clip_name1": "clip_g.safetensors",
      "clip_name2": "clip_l.safetensors",
      "type": "sd3",
      "device": "default"
    },
    "class_type": "DualCLIPLoader",
    "_meta": {
      "title": "DualCLIPLoader"
    }
  },
  "18": {
    "inputs": {
      "clip_name": "t5xxl_enconly.safetensors",
      "type": "sd3",
      "device": "default"
    },
    "class_type": "CLIPLoader",
    "_meta": {
      "title": "Load CLIP"
    }
  },
  "20": {
    "inputs": {
      "input_context": "neutral",
      "style_prompt": "Your task: Prompt optimization for T5 (Stable Diffusion 3.5)  \n\nOUTPUT THE PURE PRESULTING PROMPT ONLY! \nNEVER INCLUDE ANY META-INFORMATION SUCH AS THE NAMES OF THE DIMENSIONS BELOW.  \n\nBE VERBOSE! 300 token minimum, 512 token maximum (= ca. 450 words). ELABORATE ON DETAILS\n\nYou will receive a user prompt for image generation. Restructure it ONLY by reordering for T5 LLM models, which process long contexts evenly and understand semantic depth.\n\n\nImportant:  \nNO content changes—only reordering AND rephrasing AND INFERENCE\n\nALL original words must remain  \n\nT5-specific rules:  \n\n- Recommended length: 200-300 tokens (max. 512)  \n- Even weighting: All positions have similar influence  \n- Semantic coherence: T5 understands relationships and nuances  \n- D4 (Attributes) expansion: This is T5's strength  \n\nT5 dimensions and token budget:  \n\nNarrative order: D1 → D2 → D3 → D4 → D5 → D6  \n\n- D1 - Core subject (10-30 tokens):  \n  Can be more detailed than in CLIP  \n  Subject with all specifications  \n\n- D2 - Action (10-40 tokens):  \n  Detailed action descriptions possible  \n  T5 understands complex motion sequences  \n\n- D3 - Relational context (30-100 tokens):  \n  EXPAND here! T5's strength is context understanding  \n  Location, time, cultural details, spatial relationships  \n\n- D4 - Attributive qualities (30-80 tokens):  \n  FOCUS for T5! All moods, colors, lighting conditions  \n  Complex atmospheric descriptions  \n  Here you compensate for CLIP's weakness  \n\n- D5 - Style/medium (10-40 tokens):  \n  Stylistic subtleties and references  \n  Can be more elaborate than in CLIP  \n\n- D6 - Technical parameters (0-20 tokens):  \n  All technical details at the end  \n\nT5 processing steps:  \n\n1. Analyze all aspects of the prompt completely.\n1a Conduct a sentiment/style analysis of the prompt; translate this into a pictorial style if relevant\n2. Identify especially the atmospheric/attributive elements  \n3. Preserve all original phrasing  \n4. Sort by narrative logic: D1→D2→D3→D4→D5→D6  \n5. Use the space up to ~300 tokens meaningfully  \n6. Place complex descriptions in D3 and D4  \n\n--- \n\nLet me know if you'd like any adjustments!",
      "api_key": [
        "14",
        0
      ],
      "model": "google/gemini-2.5-pro-preview",
      "debug": "enable",
      "input_prompt": [
        "13",
        0
      ]
    },
    "class_type": "ai4artsed_openrouter",
    "_meta": {
      "title": "Prompt optimization t5"
    }
  },
  "21": {
    "inputs": {
      "text": [
        "20",
        0
      ],
      "clip": [
        "18",
        0
      ]
    },
    "class_type": "CLIPTextEncode",
    "_meta": {
      "title": "CLIP Text Encode POSITIVE (t5)"
    }
  },
  "24": {
    "inputs": {
      "text": "watermark",
      "clip": [
        "17",
        0
      ]
    },
    "class_type": "CLIPTextEncode",
    "_meta": {
      "title": "CLIP Text Encode NEGATIVE (clip_l, clip_g)"
    }
  },
  "25": {
    "inputs": {
      "text": "watermark",
      "clip": [
        "18",
        0
      ]
    },
    "class_type": "CLIPTextEncode",
    "_meta": {
      "title": "CLIP Text Encode NEGATIVE (t5)"
    }
  },
  "35": {
    "inputs": {
      "alpha": 0.5,
      "clip_conditioning": [
        "24",
        0
      ],
      "t5_conditioning": [
        "25",
        0
      ]
    },
    "class_type": "ai4artsed_t5_clip_fusion",
    "_meta": {
      "title": "AI4ArtsEd T5‑CLIP Fusion"
    }
  },
  "36": {
    "inputs": {
      "alpha": 0.5,
      "clip_conditioning": [
        "6",
        0
      ],
      "t5_conditioning": [
        "21",
        0
      ]
    },
    "class_type": "ai4artsed_t5_clip_fusion",
    "_meta": {
      "title": "AI4ArtsEd T5‑CLIP Fusion"
    }
  },
  "39": {
    "inputs": {
      "preview": "",
      "source": [
        "13",
        0
      ]
    },
    "class_type": "PreviewAny",
    "_meta": {
      "title": "input translation"
    }
  },
  "40": {
    "inputs": {
      "preview": "",
      "source": [
        "16",
        0
      ]
    },
    "class_type": "PreviewAny",
    "_meta": {
      "title": "Prompt optimized for clipl/g"
    }
  },
  "41": {
    "inputs": {
      "preview": "",
      "source": [
        "20",
        0
      ]
    },
    "class_type": "PreviewAny",
    "_meta": {
      "title": "Prompt optimized for t5"
    }
  },
  "43": {
    "inputs": {
      "value": "Ein einzelner Mann steht auf einem schroffen Felsvorsprung, die Rückenfigur in dunklem Gehrock fest in der Mitte des Bildes verankert. Er blickt in eine weite, nebelverhangene Gebirgslandschaft, die sich in rhythmischen Wellen nach hinten erstreckt, bis sie in ferne, bläulich entrückte Höhen übergeht. Die Silhouette der Figur ist klar konturiert, doch bleibt sie dem Betrachter unzugänglich – Gesicht und Ausdruck entziehen sich der Wahrnehmung. So wird der Dargestellte zur Projektionsfläche und zur Chiffre des menschlichen Standpunkts angesichts der Unendlichkeit.  Die Komposition ist zentralperspektivisch organisiert, mit einer präzisen Balance zwischen vertikaler Erhebung und horizontaler Tiefenstaffelung. Die Bildelemente – Felsen, Nebel, Bergzüge – sind nicht als realistische Topographie gemeint, sondern als idealisierte Konfiguration: eine synthetische Landschaft, die aus verschiedenen Naturmotiven zusammengesetzt ist. Dieses Verfahren verweist auf die Absicht, eine symbolisch aufgeladene Szenerie zu schaffen, keine dokumentarische.  Die gesamte Szenerie ist in kühle Blau-, Grau- und Grüntöne getaucht. Der Himmel ist bewölkt, aber lichtdurchzogen, die Konturen der Berge lösen sich in der Ferne auf – eine subtile Anwendung der Luftperspektive. Die hell-dunkel Kontraste bleiben weich und atmosphärisch, nicht dramatisch. Der Nebel zwischen den Felstürmen ist nicht bloß meteorologisches Phänomen, sondern fungiert als Schwellenraum: Er trennt Sichtbares und Unsichtbares, das Erfahrbare vom Transzendenten. In dieser Ambivalenz liegt der eigentliche Gehalt des Bildes – zwischen Kontemplation, Einsamkeit und der Möglichkeit geistiger Erhebung.  Maltechnisch ist das Bild geprägt von äußerster Feinheit. Der Pinselstrich bleibt fast unsichtbar, die Oberfläche ist glatt und spannungslos geschlossen. Der Farbauftrag erfolgt überwiegend in dünnen, lasierenden Schichten, vor allem in Himmel und Nebel, was eine durchlichtete Tiefenwirkung erzeugt. Die Figur und der Felsvorsprung hingegen sind dichter und mit fein abgestuften Dunkelwerten ausgearbeitet. Die Palette ist stark reduziert und harmonisch geschlossen – keine Primärkontraste, keine Farbbrüche, sondern ein gleichsam atemloses, meditatives Farbfeld.  Es handelt sich um eine Malerei, die nicht auf physische Stofflichkeit abzielt, sondern auf die Verinnerlichung des Gezeigten. Die maltechnische Disziplin – der glatte Auftrag, die Reduktion der Mittel, die Lichtbehandlung – zielt auf die Erzeugung eines kontemplativen Bildraums, in dem sich Wahrnehmung und Reflexion überlagern. So entsteht eine stille Szene von geradezu existenzieller Wucht: Der Mensch erscheint als Betrachtender – aber zugleich wird das Sehen selbst zum Thema. Das Bild evoziert keine Handlung, sondern einen Denkzustand. Es zeigt keine Geschichte, sondern eine Konstellation zwischen Mensch, Natur und dem Unbestimmten – zwischen Wahrnehmung, Abgrund und Möglichkeit."
    },
    "class_type": "PrimitiveString",
    "_meta": {
      "title": "ai4artsed_text_prompt"
    }
  }
}