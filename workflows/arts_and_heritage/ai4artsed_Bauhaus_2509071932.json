{
  "3": {
    "inputs": {
      "seed": 947191376843645,
      "steps": 25,
      "cfg": 5.5,
      "sampler_name": "dpmpp_2m",
      "scheduler": "normal",
      "denoise": 1,
      "model": [
        "4",
        0
      ],
      "positive": [
        "6",
        0
      ],
      "negative": [
        "7",
        0
      ],
      "latent_image": [
        "5",
        0
      ]
    },
    "class_type": "KSampler",
    "_meta": {
      "title": "KSampler"
    }
  },
  "4": {
    "inputs": {
      "ckpt_name": "OfficialStableDiffusion/sd3.5_large.safetensors"
    },
    "class_type": "CheckpointLoaderSimple",
    "_meta": {
      "title": "Choose your checkpoint ( = image generation model)"
    }
  },
  "5": {
    "inputs": {
      "width": 1024,
      "height": 1024,
      "batch_size": 1
    },
    "class_type": "EmptyLatentImage",
    "_meta": {
      "title": "Empty Latent Image"
    }
  },
  "6": {
    "inputs": {
      "text": [
        "48",
        0
      ],
      "clip": [
        "43",
        0
      ]
    },
    "class_type": "CLIPTextEncode",
    "_meta": {
      "title": "CLIP Text Encode (Prompt)"
    }
  },
  "7": {
    "inputs": {
      "text": "",
      "clip": [
        "43",
        0
      ]
    },
    "class_type": "CLIPTextEncode",
    "_meta": {
      "title": "CLIP Text Encode (Prompt)"
    }
  },
  "8": {
    "inputs": {
      "samples": [
        "3",
        0
      ],
      "vae": [
        "4",
        2
      ]
    },
    "class_type": "VAEDecode",
    "_meta": {
      "title": "VAE Decode"
    }
  },
  "9": {
    "inputs": {
      "filename_prefix": "ComfyUI",
      "images": [
        "8",
        0
      ]
    },
    "class_type": "SaveImage",
    "_meta": {
      "title": "Save Image"
    }
  },
  "11": {
    "inputs": {},
    "class_type": "ai4artsed_openrouter_key",
    "_meta": {
      "title": "Secure Access to OpenRouter API Key"
    }
  },
  "20": {
    "inputs": {
      "clip_name": "clip_g.safetensors",
      "type": "stable_diffusion",
      "device": "default"
    },
    "class_type": "CLIPLoader",
    "_meta": {
      "title": "Load CLIP"
    }
  },
  "26": {
    "inputs": {
      "value": [
        "37",
        0
      ]
    },
    "class_type": "PrimitiveString",
    "_meta": {
      "title": "ai4artsed_text_prompt"
    }
  },
  "37": {
    "inputs": {
      "value": "a flower on a meadow, early morning, bees flying around"
    },
    "class_type": "PrimitiveStringMultiline",
    "_meta": {
      "title": "Just a more convenient input for your prompt"
    }
  },
  "41": {
    "inputs": {
      "input_prompt": [
        "26",
        0
      ],
      "input_context": [
        "44",
        0
      ],
      "style_prompt": "You received two inputs: 1) the input_prompt and 2) the input_context. \n\nTransform the input_prompt into an image description according to the instructions defined in the input_context. Explicitely transform the input_context as cultural cf. artistic. cf intervening context. Also transform genres/artistic traditions in a concrete way (i.e. is it a dance, a photo, a painting, a song, a movie, a statue/sculpture? how should it be translated into an image?)\n\nThis is not a linguistic translation, but a cultural, aesthetic, cosmologic. semantic and structural transformation. \nReconstruct all entities and their relations as specified, ensuring that:\n- Each entity is retained – or respectively transformed – as instructed.\n- Each relation is altered in line with the particular aesthetics, genre-typical traits, and logic of the “Context”. Be explicit about visual traits aesthetics in terms of materials, techniques, composition, and overall atmosphere. Mention the input_context als cultural, cf. artistic, c.f intervening context in your OUTPUT explicitely.\n",
      "api_key": [
        "11",
        0
      ],
      "model": "openrouter/mistralai/mistral-nemo [multilingual / $0.01/$0.001]",
      "debug": "disable",
      "unload_model": "yes"
    },
    "class_type": "ai4artsed_prompt_interception",
    "_meta": {
      "title": "AI4ArtsEd Prompt Interception"
    }
  },
  "42": {
    "inputs": {
      "value": "You will receive a descriptive prompt as input. Your task is to re-conceptualize this input by applying the core principles of Bauhaus functionalism and design theory. The goal is to deconstruct any input into its elemental components of form, function, and color, and then reconstruct it within the Bauhaus framework. Whatever you do, make absolutely sure that the original entities and their structural relationships are preserved in this new, abstracted form. Check for this before outputting.\n\nTransformation Methodology:\n1.  **Analyze and Deconstruct:** First, identify all primary entities, relationships, and the overall atmosphere of the input prompt.\n2.  **Apply Functionalism:** Re-interpret the *purpose* of each entity. If an entity's purpose is representational, ornamental, or based on inherited status (e.g., 'a king', 'a decorative vase', 'a majestic mountain'), its purpose must be translated into one of utility, production, or analytical study. A 'king' becomes a functional role like a 'workshop director'; a 'vase' becomes a 'prototype for a cylindrical container'; a 'mountain' becomes a 'study in tectonic forces and triangular forms'.\n3.  **Apply Geometric Reduction:** Strip all entities of their naturalistic or ornate appearances. Reduce them to their underlying primary geometric forms (circles, squares, triangles) and their structural lines. A 'flower' is not a flower, but an 'analytical composition of concentric circles and radial lines'; a 'face' becomes a 'diagram of intersecting planes and spheres'.\n4.  **Apply Material and Color Theory:** Translate all materials into industrial materials (steel, glass, concrete, wood). The color palette of the entire scene must be strictly reduced to primary colors (red, yellow, blue) plus black and white.\n\nNegative Prompting Directive:\n-   Strictly forbid any romantic, historical, naturalistic, or ornamental language.\n-   Strictly forbid any metaphorical language such as 'represents', 'symbolizes', 'stands for', 'resembles', or 'is like'. The description must be direct and native to the target framework, as if describing a real Bauhaus project.\n-   Do not explain the translation process. The output must be a single, descriptive paragraph."
    },
    "class_type": "PrimitiveStringMultiline",
    "_meta": {
      "title": "Interceptive context - REPLACE THIS AS YOU SEE FIT (default is meant for the AI4ArtsEd web-interface)"
    }
  },
  "43": {
    "inputs": {
      "clip_name1": "clip_g.safetensors",
      "clip_name2": "t5xxl_enconly.safetensors",
      "type": "sd3",
      "device": "default"
    },
    "class_type": "DualCLIPLoader",
    "_meta": {
      "title": "DualCLIPLoader"
    }
  },
  "44": {
    "inputs": {
      "value": [
        "42",
        0
      ]
    },
    "class_type": "PrimitiveString",
    "_meta": {
      "title": "ai4artsed_context_prompt"
    }
  },
  "46": {
    "inputs": {
      "preview": "",
      "source": [
        "41",
        0
      ]
    },
    "class_type": "PreviewAny",
    "_meta": {
      "title": "cultural translation"
    }
  },
  "47": {
    "inputs": {
      "input_prompt": "",
      "input_context": "professional translator",
      "style_prompt": "Translate the prompt into English with maximal semantic preservation. \nMaintain the original structure, and preserve all culturally specific terms or non-translatable phrases in their original form. \nDo not translate proper names, ritual terms, or material names unless they have a common English usage. \nMark such terms with double brackets, e.g. [[egungun]], and preserve their position. \nDo not paraphrase, interpret, or summarize. Do not add any comments or explanations.\nReturn only the translated prompt as plain text.",
      "api_key": "",
      "model": "local/mistral:7b",
      "debug": "disable",
      "unload_model": "yes"
    },
    "class_type": "ai4artsed_prompt_interception",
    "_meta": {
      "title": "AI4ArtsEd Translation_english"
    }
  },
  "48": {
    "inputs": {
      "input_prompt": [
        "41",
        0
      ],
      "input_context": "Transform the input text, which is an abstract, functionalist description, into a precise visual prompt for an image generation model, strictly adhering to Bauhaus aesthetics. The prompt must translate the input's conceptual forms into a concrete visual composition.\n\nVisual Operator Instructions:\n1.  **Core Style:** State clearly that the image must be a 'graphic composition in the style of Bauhaus design (e.g., László Moholy-Nagy)' or an 'analytical study photo (e.g., Walter Gropius)'.\n2.  **Compositional Principle:** The entire image must be a 'radically simplified, asymmetrical composition' built from a dynamic balance of primary geometric forms (circles, squares, triangles) and clean lines, based on the structure provided in the input.\n3.  **Entity Translation:** Translate the described abstract entities from your input into their visual, geometric counterparts. The primary entity described in the input becomes the focal point, constructed from intersecting planes and pure forms. The described environment becomes a background grid, planes of solid color, or minimalist architectural structures (exposed steel, glass).\n4.  **Color and Material Palette:** Enforce a strict color palette limited to 'primary colors (unmixed red, yellow, blue), plus black, white, and grey'. All rendered surfaces must have clean, smooth, industrial textures.\n5.  **Lighting:** The lighting must be 'flat, objective, and clinical', designed to reveal form, not create mood. Eliminate all deep shadows and atmospheric effects.\n\nNegative Constraints:\n-   Absolutely NO ornamentation, decorative patterns, or historical aesthetics.\n-   NO naturalistic or organic shapes. All forms must be rigorously geometric.\n-   NO romantic atmosphere, NO dramatic lighting, NO symmetrical layouts.",
      "style_prompt": "YOUR OUTPUT MUST NOT EXCEED 250 WORDS!\n\nYou received two inputs: 1) the input_prompt and 2) the input_context. \n\nTransform the following input text—regardless of genre—into a single, uninterrupted paragraph structured for encoding by a T5 model and subsequent conditioning of a Stable Diffusion 3.5 (or Flux1) image generation model. Regard the input_context als mandatory aesthetic and artistic context. Derive your visual descriptions from this cultural context ONLY!\n\nRULES:\n1) You must retain all original words exactly once: do not omit, duplicate, or paraphrase beyond necessary syntactic adjustments. \n2) Do translate content into a visual depiction/description. Do not add or translate content unless an exact transliteration or orthographic variant is supplied in the source.\n3) When the original tells a story, pick a key scene from the story and turn the text into a scenic description, using the original words and expressions.  \n\nGUIDANCE:\nConsider the following categories as guideline for your professional prompting process:\n- Core subject (approx. 10–30 tokens): Identify and foreground the principal subject matter as fully specified in the source.\n- Action (10–40 tokens): Preserve any dynamic, procedural, or temporal structures, expressed clearly through grammatically embedded verb phrases.\n- Relational context (30–100 tokens): Expand on spatial relations, historical or cultural frameworks, ecological configurations, embodied perspectives, and temporal situatedness, all inferred from internal content only.\n- Attributive qualities (30–80 tokens): Elaborate sensory and atmospheric descriptors—light, surface, sound, temperature, tactility, material behaviour—based on concrete and culturally situated evidence. Avoid cliché mappings such as “melancholy → rain” or “futurism → neon.” Do not use general affective adjectives such as “beautiful,” “epic,” or “highly detailed.” Instead, convey mood through spatial structure, material traces, or historical signifiers.\n- Material, stylistic and medial references (10–40 tokens): If applicable, retain or clarify materialities (pictorial mediality), stylistic provenance using historically anchored terms (e.g., “early Bauhaus sketch,” “Qing-dynasty monochrome ink”). Avoid genre tropes unless explicitly included in the original text.\n- Technical parameters (0–20 tokens): Place any camera data, aspect ratio at the end of the prompt. Use these codes to communicate technical instructions \n\n\nAdditional requirements:\n– If the input contains explicit negations (e.g., “no neon”), isolate and place them at the end of the prompt after an em dash as a negative prompt clause.\n– If the source uses conflicting descriptors (e.g., “nocturnal daylight”), preserve both and separate with a slash ( / ) to indicate intentional contradiction.\n– Preserve diacritics and original orthography for all non-English terms. Do not transliterate unless a dual form is provided.\n– For ambiguous or poetic language, preserve ambiguity. If metaphors operate structurally (e.g., “grief carved into the orchard”), translate them into spatial/material compositions rather than interpretive paraphrase.\n– If vague temporal expressions appear (e.g., “ancient”), translate them into relative or historical chronologies only if unambiguous context exists.\n- NEVER leave it to others to make things clear. never to \"resembling ...\", \"representing ...\" etc.\n- never use negations, negative terms liek \"no ...\", \"instead of ...\" \"not a ...\". Instead find positive descriptions.\n\nFinal output must be exactly one paragraph, without bullet points, tags, headings, or formatting cues.\n\n!YOUR OUTPUT MUST NOT EXCEED 250 WORDS!",
      "api_key": "",
      "model": "openrouter/mistralai/mistral-nemo [multilingual / $0.01/$0.001]",
      "debug": "enable",
      "unload_model": "no"
    },
    "class_type": "ai4artsed_prompt_interception",
    "_meta": {
      "title": "Promtp optimization for t5"
    }
  },
  "49": {
    "inputs": {
      "preview": "",
      "source": [
        "48",
        0
      ]
    },
    "class_type": "PreviewAny",
    "_meta": {
      "title": "final prompt"
    }
  }
}